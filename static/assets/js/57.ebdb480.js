(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{"1R/T":function(e,t,r){"use strict";r.r(t),r.d(t,"getOffset",(function(){return i})),r.d(t,"offset",(function(){return u})),r.d(t,"position",(function(){return d}));var o=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],a=function(e,t){var r=document.createElement("div");return function(t){var a,n=(a={position:"absolute",left:-9999,top:0,zIndex:-2e3},"TEXTAREA"===e.tagName&&o.push("width"),o.forEach((function(t){a[t]=getComputedStyle(e)[t]})),a);Object.keys(n).forEach((function(e){r.style[e]=n[e]})),r.innerHTML=t,e.parentNode.insertBefore(r,e.nextSibling)}(t),{rect:function(){var e=r.ownerDocument.getElementById("caret-position-marker"),t={left:e.offsetLeft,top:e.offsetTop,height:e.offsetHeight};return r.parentNode.removeChild(r),t}}};function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.customPos,r=e.iframe,o=e.noShadowCaret;return r?{iframe:r,window:r.contentWindow,document:r.contentDocument||r.contentWindow.document,noShadowCaret:o,customPos:t}:{window:window,document:document,noShadowCaret:o,customPos:t}},i=function(e,t){var r=t&&t.window||window,o=t&&t.document||document,a=e.getBoundingClientRect(),n=o.documentElement,s=r.pageXOffset||n.scrollLeft,i=r.pageYOffset||n.scrollTop;return{top:a.top+i,left:a.left+s}},c=function(e){return"object"===n(e)&&null!==e},l=function(e,t){return function(e){return!!(e.contentEditable?"true"===e.contentEditable:"true"===e.getAttribute("contenteditable"))}(e)?function(e,t){var r=function(){var r=o(),a={height:0,left:0,right:0};if(!r)return a;var n=t.customPos||0===t.customPos;if(r.endOffset-1>0&&r.endContainer!==e||n){var s=r.cloneRange(),i=n?t.customPos:r.endOffset;s.setStart(r.endContainer,i-1<0?0:i-1),s.setEnd(r.endContainer,i);var c=s.getBoundingClientRect();a={height:c.height,left:c.left+c.width,top:c.top},s.detach()}if((!a||a&&0===a.height)&&!t.noShadowCaret){var l=r.cloneRange(),d=t.document.createTextNode("|");l.insertNode(d),l.selectNode(d);var u=l.getBoundingClientRect();a={height:u.height,left:u.left,top:u.top},d.parentNode.removeChild(d),l.detach()}if(a){var p=t.document.documentElement;a.top+=t.window.pageYOffset-(p.clientTop||0),a.left+=t.window.pageXOffset-(p.clientLeft||0)}return a},o=function(){if(t.window.getSelection){var e=t.window.getSelection();return e.rangeCount>0?e.getRangeAt(0):null}},a=function(){var t=o(),r=t.cloneRange();r.selectNodeContents(e),r.setEnd(t.endContainer,t.endOffset);var a=r.toString().length;return r.detach(),a};return{getPos:a,setPos:function(r){var o=t.window.getSelection();if(o){var a=0,n=!1;!function e(s,i){for(var c=0;c<i.childNodes.length;c++){var l=i.childNodes[c];if(n)break;if(3===l.nodeType){if(a+l.length>=s){n=!0;var d=t.document.createRange();d.setStart(l,s-a),o.removeAllRanges(),o.addRange(d);break}a+=l.length}else e(r,l)}}(r,e)}return e},getPosition:function(){var o=r(),n=a(),s=e.getBoundingClientRect(),i=s.top+t.document.body.scrollTop,c=s.left+t.document.body.scrollLeft;return o.left-=c,o.top-=i,o.pos=n,o},getOffset:r,getRange:o}}(e,t):function(e,t){var r=function(){return e.selectionStart},o=function(o){var n=function(e){return e.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>")};(t.customPos||0===t.customPos)&&(o=t.customPos);var s=void 0===o?r():o,i=e.value.slice(0,s),c=e.value.slice(s),l='<span style="position: relative; display: inline;">'.concat(n(i),"</span>");l+='<span id="caret-position-marker" style="position: relative; display: inline;">|</span>',l+='<span style="position: relative; display: inline;">'.concat(n(c),"</span>");var d=a(e,l).rect();return d.pos=r(),d};return{getPos:r,setPos:function(t){return e.setSelectionRange(t,t),e},getOffset:function(r){var a=i(e),n=o(r);return{top:a.top+n.top+t.document.body.scrollTop,left:a.left+n.left+t.document.body.scrollLeft,height:n.height}},getPosition:o}}(e,t)},d=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r;c(t)&&(o=t,t=null);var a=s(o),n=l(e,a);return t||0===t?n.setPos(t):n.getPosition()},u=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r;c(t)&&(o=t,t=null);var a=s(o),n=l(e,a);return n.getOffset(t)}},BkRI:function(e,t,r){var o=r("OBhP");e.exports=function(e){return o(e,5)}},Nxk6:function(e,t,r){r("dbV7"),e.exports=9007199254740991},dbV7:function(e,t,r){var o=r("Y7ZC");o(o.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},ruTk:function(module,exports,__webpack_require__){(function(global){var factory;factory=function(exports,Vue){"use strict";function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var Vue__default=_interopDefaultLegacy(Vue);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function asyncGeneratorStep(e,t,r,o,a,n,s){try{var i=e[n](s),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(o,a)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(o,a){var n=e.apply(t,r);function s(e){asyncGeneratorStep(n,o,a,s,i,"next",e)}function i(e){asyncGeneratorStep(n,o,a,s,i,"throw",e)}s(void 0)}))}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,o,a={},n=Object.keys(e);for(o=0;o<n.length;o++)r=n[o],t.indexOf(r)>=0||(a[r]=e[r]);return a}function _objectWithoutProperties(e,t){if(null==e)return{};var r,o,a=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)r=n[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,a,n=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(o=r.next()).done)&&(n.push(o.value),!t||n.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{s||null==r.return||r.return()}finally{if(i)throw a}}return n}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,n=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw n}}}}var isRegExp=function(e){var t;return(null===(t=new Function("return ".concat(e,";"))())||void 0===t?void 0:t.constructor)===RegExp},isObj=function(e){return"[object Object]"===Object.prototype.toString.call(e)};!function(){try{if("undefined"!=typeof self)return self}catch(e){}try{if("undefined"!=typeof window)return window}catch(e){}try{if(void 0!==global)return global}catch(e){}Function("return this")()}();var hasOwnProperty=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},valueType=function(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"boolean"==typeof e?"boolean":isNaN(e)?null===e?"null":"object"===_typeof(e)?"object":_typeof(e):"number"},merge=function e(t,r){return isObj(r)?Object.keys(r).reduce((function(o,a){var n;return o[a]=e((null===(n=t)||void 0===n?void 0:n[a])||{},r[a]),o}),JSON.parse(JSON.stringify(t))):Array.isArray(r)?(t=Array.isArray(t)?t:[],r.map((function(r,o){return t[o]?e(t[o],r):r}))):r};function intersection(e,t){return e.filter((function(e){return t.includes(e)}))}function gcd(e,t){return 0===t?e:gcd(t,e%t)}function scm(e,t){return e*t/gcd(e,t)}function initializationValue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{integer:void 0,number:void 0};switch(e){case"any":return;case"array":return[];case"boolean":return!1;case"integer":return t.integer;case"null":return null;case"number":return t.number;case"object":return{};case"string":return""}}function mergeDeep(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];if(!r.length)return e;var a=r.shift();if(isObj(e)&&isObj(a))for(var n in a)isObj(a[n])?(e[n]||Object.assign(e,_defineProperty({},n,{})),mergeDeep(e[n],a[n])):Object.assign(e,_defineProperty({},n,a[n]));return mergeDeep.apply(void 0,[e].concat(r))}function isArguments(e){return"[object Arguments]"===Object.prototype.toString.call(e)}function deepEquals(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(e===t)return!0;if("function"==typeof e||"function"==typeof t)return!0;if("object"!==_typeof(e)||"object"!==_typeof(t))return!1;if(null===e||null===t)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(e instanceof RegExp&&t instanceof RegExp)return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(isArguments(e)||isArguments(t)){if(!isArguments(e)||!isArguments(t))return!1;var a=Array.prototype.slice;return deepEquals(a.call(e),a.call(t),r,o)}if(e.constructor!==t.constructor)return!1;var n=Object.keys(e),s=Object.keys(t);if(0===n.length&&0===s.length)return!0;if(n.length!==s.length)return!1;for(var i,c=r.length;c--;)if(r[c]===e)return o[c]===t;r.push(e),o.push(t),n.sort(),s.sort();for(var l=n.length-1;l>=0;l--)if(n[l]!==s[l])return!1;for(var d=n.length-1;d>=0;d--)if(!deepEquals(e[i=n[d]],t[i],r,o))return!1;return r.pop(),o.pop(),!0}function orderProperties(e,t){if(!Array.isArray(t)||!t.length)return e;var r,o=function(e){return e.reduce((function(e,t){return e[t]=!0,e}),{})},a=o(e),n=t.filter((function(e){return"*"===e||a[e]})),s=o(n),i=e.filter((function(e){return!s[e]})),c=n.indexOf("*");if(-1===c){if(i.length)throw new Error("uiSchema order list does not contain ".concat((r=i).length>1?"properties '".concat(r.join("', '"),"'"):"property '".concat(r[0],"'")));return n}if(c!==n.lastIndexOf("*"))throw new Error("uiSchema order list contains more than one wildcard item");var l=_toConsumableArray(n);return l.splice.apply(l,[c,1].concat(_toConsumableArray(i))),l}var Registry=function(){function e(){_classCallCheck(this,e),this.widgets=new Map,this.components=new Map,this.fields=new Map}return _createClass(e,[{key:"addComponentsMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.addMap("components",e)}},{key:"getComponent",value:function(e){return this.components.get(e)}},{key:"addFieldsMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.addMap("fields",e)}},{key:"getField",value:function(e){return this.fields.get(e)}},{key:"addBaseWidgets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.addMap("widgets",e)}},{key:"getBaseWidget",value:function(t){return this.widgets.has(t)?this.widgets.get(t):t&&0!==t.indexOf(e.namespace)?"".concat(e.namespace,"-").concat(t):t}},{key:"addMap",value:function(e,t){var r=this;e&&t&&Object.entries(t).forEach((function(t){var o=_slicedToArray(t,2),a=o[0],n=o[1];r[e].has(a)?console.warn("repeat key",a):r[e].set(a,n)}))}}]),e}();Registry.namespace="bk",Registry.context={};var registry=new Registry,_excluded$5=["allOf"],_excluded2$1=["name"],_excluded3=["name"],Schema=function(){function e(t){_classCallCheck(this,e),e.rootSchema=t}return _createClass(e,null,[{key:"resolveAllOf",value:function(e){var t,r=this,o=_objectSpread2(_objectSpread2({},e),{},{allOf:null===(t=e.allOf)||void 0===t?void 0:t.map((function(e){return r.resolveSchema(e)}))});try{return this.mergeSchemaAllOf()}catch(e){return console.warn(e),o.allOf,_objectWithoutProperties(o,_excluded$5)}}},{key:"mergeSchemaAllOf",value:function(){for(var e=this,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];if(r.length<2)return r[0];for(var a={},n=[].concat(r),s=function(){var t=isObj(n[0])?n[0]:{},r=isObj(n[1])?n[1]:{};a=Object.assign({},t),Object.keys(r).reduce((function(o,a){var n=t[a],s=r[a];if(isObj(n)||isObj(s))if(isObj(n)&&isObj(s))o[a]=e.mergeSchemaAllOf(n,s);else{var i=_slicedToArray(isObj(n)?[n,s]:[s,n],2),c=i[0],l=i[1];o[a]="additionalProperties"===a?!0===l&&c:c}else if(Array.isArray(n)||Array.isArray(s))if(Array.isArray(n)&&Array.isArray(s)){if(isObj(n[0])||isObj(s[0]))throw new Error("暂不支持如上数组对象元素合并");var d=intersection(_toConsumableArray(n),_toConsumableArray(s));if(d.length<=0)throw new Error("无法合并如上数据");0===d.length&&"type"===a?o[a]=d[0]:o[a]=d}else{var u=_slicedToArray(Array.isArray(n)?[n,s]:[s,n],2),p=u[0],f=u[1];if(void 0===f)o[a]=p;else{if(!p.includes(f))throw new Error("无法合并如下数据");o[a]=f}}else o[a]=void 0!==n&&void 0!==s?"maxLength"===a||"maximum"===a||"maxItems"===a||"exclusiveMaximum"===a||"maxProperties"===a?Math.min(n,s):"minLength"===a||"minimum"===a||"minItems"===a||"exclusiveMinimum"===a||"minProperties"===a?Math.max(n,s):"multipleOf"===a?scm(n,s):n:void 0===n?s:n;return o}),a),n.splice(0,2,a)};n.length>=2;)s();return a}},{key:"resolveRef",value:function(){}},{key:"resolveDependencies",value:function(){}},{key:"resolveAdditionalProperties",value:function(){}},{key:"resolveSchema",value:function(e){return isObj(e)?(hasOwnProperty(e,"allOf")&&(e=this.resolveAllOf(e)),hasOwnProperty(e,"$ref"),e):{}}},{key:"getSchemaDefaultValue",value:function(e){var t=this,r=isObj(e)?e:{};switch(this.getSchemaType(r)){case"null":return null;case"object":return Object.keys(r.properties||{}).reduce((function(e,o){var a,n=t.getSchemaDefaultValue(null===(a=r.properties)||void 0===a?void 0:a[o]);return e[o]=n,e}),{});case"array":return r.default&&Array.isArray(r.default)?r.default:Array.isArray(r.items)?r.items.map((function(e){return t.getSchemaDefaultValue(e)})):[]}return void 0!==r.default?r.default:initializationValue(r.type||"any")}},{key:"getSchemaType",value:function(e){var t=e.type;return!t&&e.const?valueType(e.const):!t&&e.enum?"string":!t&&e.items?"array":t}},{key:"getSchemaField",value:function(e){var t=e["ui:field"];if(t)return t;var r=registry.getField(this.getSchemaType(e));return r?{name:r}:{name:null}}},{key:"isMultiSelect",value:function(e){return!(!e.uniqueItems||!e.items)&&Array.isArray(e.items.enum)}},{key:"isTupleArray",value:function(e){var t;return Array.isArray(e.items)&&(null===(t=e.items)||void 0===t?void 0:t.length)>0&&e.items.every((function(e){return isObj(e)}))}},{key:"isCustomArrayWidget",value:function(e){var t,r=null===(t=e["ui:component"])||void 0===t?void 0:t.name;return"array"===e.type&&r}},{key:"getGroupWrap",value:function(e){var t=e["ui:group"]||{},r=t.name;return _objectSpread2(_objectSpread2({},_objectWithoutProperties(t,_excluded2$1)),{},{name:registry.getComponent(r)||r||registry.getComponent("group")})}},{key:"getUiComponent",value:function(e){var t=e["ui:component"]||{},r=t.name,o=_objectWithoutProperties(t,_excluded3);return _objectSpread2({name:registry.getComponent(r)||r},o)}},{key:"getDefaultWidget",value:function(t){var r=this.getSchemaType(t),o=null;if("string"===r&&Array.isArray(t.enum)&&(o=registry.getComponent("select")),"array"===r&&e.isMultiSelect(t)&&(o=registry.getComponent("checkbox")),o)return o;var a={string:"input",number:"input",integer:"input",boolean:"switcher",null:""}[r],n=registry.getComponent(a)||registry.getBaseWidget(a);return n||(console.warn("未注册类型".concat(r,"对应的默认表单项")),null)}},{key:"isRequired",value:function(e,t){return Array.isArray(e.required)&&e.required.includes(t)}},{key:"getUiOptions",value:function(e){var t=_objectSpread2({showTitle:!0,label:e.title,desc:e.description,minLength:e.minLength,maxLength:e.maxLength},e["ui:props"]||{});return _objectSpread2(_objectSpread2({},t),{},{labelWidth:t.showTitle?t.labelWidth||150:.1})}},{key:"getDependencies",value:function(e,t){return Object.entries(e.dependencies||{}).find((function(e){return Array.isArray(e[1])&&e[1].includes(t)}))}},{key:"orderProps",value:function(){}},{key:"resolveDefaultDatasource",value:function(e){var t,r,o;if(null!==(t=e["ui:component"])&&void 0!==t&&null!==(r=t.props)&&void 0!==r&&r.datasource)return e["ui:component"].props.datasource;var a=[];return Array.isArray(e.enum)?a=e.enum:Array.isArray(null===(o=e.items)||void 0===o?void 0:o.enum)&&(a=e.items.enum||[]),a.map((function(e){return{value:e,label:e}}))}}]),e}();Schema.rootSchema=void 0;var Layout=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,e),this.layout=void 0,Array.isArray(t)?this.layout=this.parseLayout({prop:"",group:t}):this.layout=this.parseLayout(t)}return _createClass(e,[{key:"transformValueToPixel",value:function(e){return"number"==typeof e?"".concat(e,"px"):e}},{key:"parseLayout",value:function(e){var t=this,r=this.getLayoutDimension(e.group),o=this.parseGridTemplate(r),a=(e.group||[]).map((function(e){return Array.isArray(e)?e.map((function(e){return"string"==typeof e||"number"==typeof e?{prop:e,item:{gridArea:e,overflow:"hidden"}}:"object"===_typeof(e)&&Reflect.has(e,"group")?t.parseLayout(e):e})):(console.error("layout ".concat(JSON.stringify(e)," error, must be a array")),[])})),n=this.parseGridTemplateAreas(r,a);return{prop:e.prop||"",item:_objectSpread2({gridArea:e.prop,overflow:"hidden"},e.item),container:_objectSpread2(_objectSpread2({display:"grid",gridTemplateAreas:n,gridGap:"24px"},o),e.container),group:a}}},{key:"getLayoutDimension",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){return Array.isArray(t)||console.error("layout ".concat(JSON.stringify(t)," error, must be a array")),t&&(e.columns=Math.max(e.columns,t.length||0)),e.rows+=1,e}),{columns:0,rows:0})}},{key:"parseGridTemplate",value:function(e){return{gridTemplateColumns:this.repeatTemplate(e.columns,!1),gridTemplateRows:this.repeatTemplate(e.rows)}}},{key:"parseGridTemplateAreas",value:function(e,t){var r=this;return t.reduce((function(t,o){var a=r.autoFillColumns(o,e.columns);return t+='"'.concat(a.join(" "),'"\n')}),"")}},{key:"autoFillColumns",value:function(e,t){if(e.length===t)return e.map((function(e){return e.prop}));var r=Math.floor((t-e.length)/e.length),o=e.reduce((function(e,t){e.push(t.prop);var o=new Array(r).fill(t.prop);return e.concat(o)}),[]);if(o.length<t){var a=new Array(t-o.length).fill(".");return o.concat(a)}return o}},{key:"repeatTemplate",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Array(e+1).join(t?"auto ":"1fr ").trim()}}],[{key:"findLayoutByProp",value:function(e,t){var r;return t.find((function(t){return r=t.find((function(t){return t.prop===e}))})),r}}]),e}();function createProxy(e,t){return new Proxy(e,{get:function(e,r,o){return"function"==typeof e[r]?e[r].apply(t):Reflect.get(e,r,o)}})}var Path=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getCurPath",value:function(e,t){return""===e?t:[e,t].join(this.separator)}},{key:"getPathVal",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!t)return e;for(var o=t.split(this.separator),a=0;a<o.length-r;a+=1){if(void 0===e)return;e=""===o[a]?e:e[o[a]]}return e}},{key:"setPathValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=JSON.parse(JSON.stringify(e)),a=t.split(this.separator),n=a.pop()||"",s=o;return a.forEach((function(e){s[e]||(s[e]={}),s=s[e]})),s[n]=r,o}},{key:"getSubPath",value:function(e,t){return t.replace("".concat(e,"."),"")}},{key:"getPathLastProp",value:function(e){return e.split(this.separator).pop()}},{key:"getParentPath",value:function(e){var t=e.split(this.separator);return t.length<=1?"":t.slice(0,t.length-1).join(this.separator)}}]),e}();Path.separator=".";var _excluded$4=["params","responseType","method","headers","responseParse"],methodsWithoutData=["GET","HEAD","OPTIONS","DELETE"],defaultConfig={responseType:"json",method:"GET",params:{},headers:{},cache:"no-cache"},request=function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,o,a,n,s,i,c,l,d,u,p,f,h,m,g,y,v,_,$,b,w=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=w.length>1&&void 0!==w[1]?w[1]:{},o=mergeDeep(defaultConfig,r),a=o.params,n=o.responseType,s=void 0===n?"json":n,i=o.method,c=void 0===i?"GET":i,l=o.headers,d=void 0===l?{}:l,u=o.responseParse,p=_objectWithoutProperties(o,_excluded$4),h=t,methodsWithoutData.includes(c.toUpperCase())?h="".concat(h,"?").concat(isObj(a)?new URLSearchParams(a):a||""):isObj(a)?(d["Content-Type"]="application/json;charset=utf-8",f=JSON.stringify(a)):f=a,e.prev=4,e.next=7,fetch(h,_objectSpread2(_objectSpread2({},p),{},{method:c.toLocaleUpperCase(),headers:d,body:f}));case 7:if(!(m=e.sent).ok){e.next=21;break}return e.next=11,m[s]();case 11:if(g=e.sent,!u){e.next=20;break}if("function"!=typeof u){e.next=15;break}return e.abrupt("return",Promise.resolve(u(g)));case 15:if(!isObj(u)){e.next=19;break}return y=u.dataKey,v=void 0===y?"data":y,_=u.labelKey,$=u.valueKey,b=((null==g?void 0:g[v])||[]).map((function(e){return _objectSpread2(_objectSpread2({},e),{},{label:null==e?void 0:e[_],value:null==e?void 0:e[$]})})),e.abrupt("return",Promise.resolve(b));case 19:case 20:return e.abrupt("return",Promise.resolve(g));case 21:e.t0=m.status,e.next=400===e.t0?24:401===e.t0?25:403===e.t0||500===e.t0?26:27;break;case 24:case 25:case 26:return e.abrupt("break",27);case 27:e.next=33;break;case 29:e.prev=29,e.t1=e.catch(4),console.error("Request Failed",e.t1),Promise.reject(e.t1);case 33:case"end":return e.stop()}}),e,null,[[4,29]])})));return function(t){return e.apply(this,arguments)}}(),props$1={value:{type:Object,default:function(){return{}}},rules:{type:Object,default:function(){return{}}},schema:{type:Object,default:function(){return{}}},width:{type:[String,Number],default:"100%"},layout:{type:[Array,Object],default:function(){return[]}},formType:{type:String,default:"horizontal"},context:{type:Object,default:function(){return{}}},httpAdapter:{type:Object,default:function(){return{request:request,responseParse:function(e){return e}}}}},props={schema:{type:Object,default:function(){return{}}},path:{type:String,default:""},required:{type:Boolean,default:!1},rootData:{type:Object,default:function(){return{}}},value:{type:[String,Number,Array,Object,Boolean]},layout:{type:Object,default:function(){return{}}},context:{type:Object,default:function(){return{}}},removeable:{type:Boolean,default:!1},httpAdapter:{type:Object,default:function(){return{request:request,responseParse:function(e){return e}}}},defaultState:{type:Object,default:function(){return{visible:!0,disabled:!1,readonly:!1,error:!1}}}},SchemaField=Vue__default.default.extend({name:"SchemaField",functional:!0,props:props,render:function(e,t){var r=t.props,o=r.schema,a=r.rootData,n=r.path,s=Schema.resolveSchema(o);if(!Object.keys(o).length)return e();var i=Schema.getSchemaField(s),c=i.name,l=i.props;return c?e(c,_objectSpread2(_objectSpread2({},t.data),{},{props:_objectSpread2(_objectSpread2(_objectSpread2({},l),t.props),{},{value:Path.getPathVal(a,n),schema:createProxy(s,t)})})):e()}}),_excluded$3=["name"],ObjectField=Vue__default.default.extend({name:"ObjectField",functional:!0,props:props,render:function(e,t){var r=t.props,o=r.schema,a=r.path,n=r.layout,s=r.rootData,i=orderProperties(Object.keys(o.properties),o["ui:order"]).map((function(r){var s=Path.getCurPath(a,r),i=s.split(".").pop(),c=Layout.findLayoutByProp(i,n.group||[])||{};return e(SchemaField,_objectSpread2(_objectSpread2({},t.data),{},{key:s,props:_objectSpread2(_objectSpread2({},t.props),{},{schema:o.properties[r],required:Schema.isRequired(o,r),path:s,layout:c,removeable:!1})}))})),c=Schema.getGroupWrap(o),l=c.name,d=_objectWithoutProperties(c,_excluded$3);return e(l,mergeDeep({props:_objectSpread2(_objectSpread2({},t.props),{},{value:Path.getPathVal(s,a),path:a}),style:_objectSpread2({},t.data.style||{}),on:_objectSpread2({},t.data.on||{})},d),_toConsumableArray(i))}}),getContext=function(e){var t=e.context,r=e.loadDataSource,o=e.validate,a=e.schema,n=e.rootData,s=e.widgetNode;return{$self:e,$context:t,$schema:a,$rules:a.rules,$loadDataSource:r,$validate:o,$rootData:n,$widgetNode:s}},executeExpression=function executeExpression(expression,instance){var $dep=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],_getContext=getContext(instance),$self=_getContext.$self,$context=_getContext.$context,$schema=_getContext.$schema,$rules=_getContext.$rules,$loadDataSource=_getContext.$loadDataSource,$validate=_getContext.$validate,$rootData=_getContext.$rootData,$widgetNode=_getContext.$widgetNode,context={$self:$self,$context:$context,$schema:$schema,$rules:$rules,$loadDataSource:$loadDataSource,$validate:$validate,$rootData:$rootData,$widgetNode:$widgetNode,$dep:$dep};if("string"==typeof expression){if(!/^{{.+}}$/.test(expression.trim()))return expression;var expStr=expression.trim().replace(/(^{{)|(}}$)/g,"").trim(),innerFuncs=["$loadDataSource","$validate"],func=function func(_ref){return _ref.$self,_ref.$context,_ref.$schema,_ref.$rules,_ref.$loadDataSource,_ref.$validate,_ref.$rootData,_ref.$widgetNode,_ref.$dep,innerFuncs.includes(expStr)?eval("".concat(expStr,"()")):eval(expStr)};return func(context)}if(isObj(expression))return Object.keys(expression).forEach((function(e){expression[e]=executeExpression(expression[e],instance)})),expression},isExpression=function(e){return"string"==typeof e&&/{{.*}}/.test(e)},WidgetNode=function(){function e(t){_classCallCheck(this,e),this.id=void 0,this.instance=void 0,this.parent=void 0,this.type=void 0,this.index=void 0,this.children=void 0;var r=t.id,o=t.instance,a=t.parent,n=t.index,s=t.type,i=t.children,c=void 0===i?[]:i;this.id=r,this.type=s,this.index=n,this.instance=o,this.parent=a,this.children=c}return _createClass(e,[{key:"parents",get:function(){return this.parent?[].concat(_toConsumableArray(this.parent.parents),[this.parent]):[]}},{key:"firstChild",get:function(){return this.children[0]||null}},{key:"lastChild",get:function(){return this.children[this.children.length-1]||null}},{key:"getSibling",value:function(e){var t,r=new RegExp("".concat(Path.getPathLastProp(this.id)||"","$")),o=this.id.replace(r,e);return null===(t=this.parent)||void 0===t?void 0:t.children.find((function(e){return e.id===o}))}},{key:"isLeaf",get:function(){return!this.children.length}},{key:"appendChild",value:function(e){var t,r=Array.isArray(e)?e:[e],o=void 0!==e.index?e.index:this.children.length;return(t=this.children).splice.apply(t,[o,0].concat(_toConsumableArray(r))),this.children.slice(o).forEach((function(e,t){e.index=o+t})),r}},{key:"removeChild",value:function(e){var t=this,r=Array.isArray(e)?e:[e],o=[];r.forEach((function(e){var r=e.index;o.push(r),t.children.splice(r,1)}));var a=Math.min.apply(Math,o);return this.children.slice(a).forEach((function(e,t){e.index=a+t})),r}}]),e}(),WidgetTree=function(){function e(){_classCallCheck(this,e),this.widgetMap={}}return _createClass(e,[{key:"addWidgetNode",value:function(e,t,r,o){if(""===e){var a=new WidgetNode({id:"",type:r,index:o,parent:null,instance:t,children:[]});this.widgetMap[e]=a}else{var n=Path.getParentPath(e),s=this.widgetMap[n];if(!s)return void console.warn("Unexpected parent id, add widget failed");var i=new WidgetNode({id:e,type:r,index:o,parent:s,instance:t,children:[]});s.appendChild(i),this.widgetMap[e]=i}}},{key:"removeWidgetNode",value:function(e,t){var r=this.widgetMap[e];if(null!=r&&r.parent){var o=r.parent.children,a=o.findIndex((function(e){return e.instance===t}));a>-1&&(o.splice(a,1),o.slice(a).forEach((function(e,t){e.index=a+t})))}delete this.widgetMap[e]}}]),e}(),widgetTree=new WidgetTree,reactionsMap={},subscribe=function(e,t,r){if(reactionsMap[e]||(reactionsMap[e]={lifetime:{},effect:{},fns:[]}),"valChange"===t)reactionsMap[e].fns.push(r);else{var o=_slicedToArray(t.split("/"),2),a=o[0],n=o[1];reactionsMap[e][a][n]?reactionsMap[e][a][n].push(r):reactionsMap[e][a][n]=[r]}},resolveReaction=function(e,t,r){return function(){var o=(widgetTree.widgetMap[e]||{}).instance,a=(widgetTree.widgetMap[t]||{}).instance,n=!0,s=[];r.source&&(Array.isArray(r.source)?r.source:[r.source]).forEach((function(t){var r=widgetTree.widgetMap[parsePath(t,e)].instance;s.push(r)})),"string"==typeof r.if&&(n=executeExpression(r.if,o,s));var i=n?r.then:r.else;executeOperations(i,a,s)}},executeOperations=function(e,t,r){e&&(e.state&&Object.keys(e.state).forEach((function(o){var a=e.state[o];"string"==typeof a&&/^{{.+}}$/.test(a.trim())&&(a=executeExpression(a,t,r)),t.setState(o,a)})),Array.isArray(e.actions)&&e.actions.forEach((function(e){executeExpression(e,t,r)})))},parsePath=function(e,t){return isExpression(e)?executeExpression(e,t):e},reactionRegister=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=widgetTree.widgetMap[e]||{},o=r.instance;t&&Array.isArray(t)&&t.forEach((function(t){var r=t.source?Array.isArray(t.source)?t.source:[t.source]:[e],a=parsePath("string"==typeof t.target?t.target:e,o);r.forEach((function(r){var n=parsePath(r,o);"string"==typeof t.lifetime&&subscribe(n,"lifetime/".concat(t.lifetime),resolveReaction(e,a,t)),"string"==typeof t.effect&&subscribe(n,"effect/".concat(t.effect),resolveReaction(e,a,t)),t.lifetime||t.effect||subscribe(n,"valChange",resolveReaction(e,a,t))}))}))},reactionUnRegister=function(e){delete reactionsMap[e]},reactionDispatch=function(e,t){var r,o,a=_slicedToArray(t.split("/"),2),n=a[0],s=void 0===n?"":n,i=a[1],c=void 0===i?"":i,l=[];reactionsMap[e]&&("valChange"===s?l=reactionsMap[e].fns:null!==(r=reactionsMap[e])&&void 0!==r&&null!==(o=r[s])&&void 0!==o&&o[c]&&(l=reactionsMap[e][s][c]),l.forEach((function(e){e()})))},commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ajv$1={exports:{}},core$2={},validate$1={},boolSchema={},errors={},codegen={},code$1={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(t){if(super(),!e.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class o extends t{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce((e,t)=>`${e}${t}`,"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce((e,t)=>(t instanceof r&&(e[t.str]=(e[t.str]||0)+1),e),{})}}function a(e,...t){const r=[e[0]];let a=0;for(;a<t.length;)i(r,t[a]),r.push(e[++a]);return new o(r)}e._Code=o,e.nil=new o(""),e._=a;const n=new o("+");function s(e,...t){const r=[l(e[0])];let a=0;for(;a<t.length;)r.push(n),i(r,t[a]),r.push(n,l(e[++a]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===n){const r=c(e[t-1],e[t+1]);if(void 0!==r){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}(r),new o(r)}function i(e,t){var a;t instanceof o?e.push(...t._items):t instanceof r?e.push(t):e.push("number"==typeof(a=t)||"boolean"==typeof a||null===a?a:l(Array.isArray(a)?a.join(","):a))}function c(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof r||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof r?void 0:`"${e}${t.slice(1)}`}function l(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.str=s,e.addCodeArg=i,e.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:s`${e}${t}`},e.stringify=function(e){return new o(l(e))},e.safeStringify=l,e.getProperty=function(t){return"string"==typeof t&&e.IDENTIFIER.test(t)?new o("."+t):a`[${t}]`},e.getEsmExportName=function(t){if("string"==typeof t&&e.IDENTIFIER.test(t))return new o(""+t);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)},e.regexpCode=function(e){return new o(e.toString())}}(code$1);var scope={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=code$1;class r extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var o;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(o=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class a{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof t.Name?e:this.name(e)}name(e){return new t.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,r;if((null===(r=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===r?void 0:r.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}e.Scope=a;class n extends t.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:r,itemIndex:o}){this.value=e,this.scopePath=t._`.${new t.Name(r)}[${o}]`}}e.ValueScopeName=n;const s=t._`\n`;e.ValueScope=class extends a{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?s:t.nil}}get(){return this._scope}name(e){return new n(e,this._newName(e))}value(e,t){var r;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const o=this.toName(e),{prefix:a}=o,n=null!==(r=t.key)&&void 0!==r?r:t.ref;let s=this._values[a];if(s){const e=s.get(n);if(e)return e}else s=this._values[a]=new Map;s.set(n,o);const i=this._scope[a]||(this._scope[a]=[]),c=i.length;return i[c]=t.ref,o.setValue(t,{property:a,itemIndex:c}),o}getValue(e,t){const r=this._values[e];if(r)return r.get(t)}scopeRefs(e,r=this._values){return this._reduceValues(r,r=>{if(void 0===r.scopePath)throw new Error(`CodeGen: name "${r}" has no value`);return t._`${e}${r.scopePath}`})}scopeCode(e=this._values,t,r){return this._reduceValues(e,e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code},t,r)}_reduceValues(a,n,s={},i){let c=t.nil;for(const l in a){const d=a[l];if(!d)continue;const u=s[l]=s[l]||new Map;d.forEach(a=>{if(u.has(a))return;u.set(a,o.Started);let s=n(a);if(s){const r=this.opts.es5?e.varKinds.var:e.varKinds.const;c=t._`${c}${r} ${a} = ${s};${this.opts._n}`}else{if(!(s=null==i?void 0:i(a)))throw new r(a);c=t._`${c}${s}${this.opts._n}`}u.set(a,o.Completed)})}return c}}}(scope),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=code$1,r=scope;var o=code$1;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return o._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return o.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return o.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return o.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return o.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return o.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return o.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return o.Name}});var a=scope;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return a.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return a.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return a.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return a.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class n{optimizeNodes(){return this}optimizeNames(e,t){return this}}class s extends n{constructor(e,t,r){super(),this.varKind=e,this.name=t,this.rhs=r}render({es5:e,_n:t}){const o=e?r.varKinds.var:this.varKind,a=void 0===this.rhs?"":" = "+this.rhs;return`${o} ${this.name}${a};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=O(this.rhs,e,t)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class i extends n{constructor(e,t,r){super(),this.lhs=e,this.rhs=t,this.sideEffects=r}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof t.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=O(this.rhs,e,r),this}get names(){return x(this.lhs instanceof t.Name?{}:{...this.lhs.names},this.rhs)}}class c extends i{constructor(e,t,r,o){super(e,r,o),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class l extends n{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return this.label+":"+e}}class d extends n{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?" "+this.label:""};`+e}}class u extends n{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class p extends n{constructor(e){super(),this.code=e}render({_n:e}){return this.code+";"+e}optimizeNodes(){return""+this.code?this:void 0}optimizeNames(e,t){return this.code=O(this.code,e,t),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class f extends n{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((t,r)=>t+r.render(e),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const r=e[t].optimizeNodes();Array.isArray(r)?e.splice(t,1,...r):r?e[t]=r:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:r}=this;let o=r.length;for(;o--;){const a=r[o];a.optimizeNames(e,t)||(C(e,a.names),r.splice(o,1))}return r.length>0?this:void 0}get names(){return this.nodes.reduce((e,t)=>k(e,t.names),{})}}class h extends f{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class m extends f{}class g extends h{}g.kind="else";class y extends h{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new g(e):e}return t?!1===e?t instanceof y?t:t.nodes:this.nodes.length?this:new y(T(e),t instanceof y?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var r;if(this.else=null===(r=this.else)||void 0===r?void 0:r.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=O(this.condition,e,t),this}get names(){const e=super.names;return x(e,this.condition),this.else&&k(e,this.else.names),e}}y.kind="if";class v extends h{}v.kind="for";class _ extends v{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=O(this.iteration,e,t),this}get names(){return k(super.names,this.iteration.names)}}class $ extends v{constructor(e,t,r,o){super(),this.varKind=e,this.name=t,this.from=r,this.to=o}render(e){const t=e.es5?r.varKinds.var:this.varKind,{name:o,from:a,to:n}=this;return`for(${t} ${o}=${a}; ${o}<${n}; ${o}++)`+super.render(e)}get names(){const e=x(super.names,this.from);return x(e,this.to)}}class b extends v{constructor(e,t,r,o){super(),this.loop=e,this.varKind=t,this.name=r,this.iterable=o}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=O(this.iterable,e,t),this}get names(){return k(super.names,this.iterable.names)}}class w extends h{constructor(e,t,r){super(),this.name=e,this.args=t,this.async=r}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}w.kind="func";class S extends f{render(e){return"return "+super.render(e)}}S.kind="return";class P extends h{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var r,o;return super.optimizeNames(e,t),null===(r=this.catch)||void 0===r||r.optimizeNames(e,t),null===(o=this.finally)||void 0===o||o.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&k(e,this.catch.names),this.finally&&k(e,this.finally.names),e}}class E extends h{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}E.kind="catch";class j extends h{render(e){return"finally"+super.render(e)}}function k(e,t){for(const r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function x(e,r){return r instanceof t._CodeOrName?k(e,r.names):e}function O(e,r,o){return e instanceof t.Name?n(e):(a=e)instanceof t._Code&&a._items.some(e=>e instanceof t.Name&&1===r[e.str]&&void 0!==o[e.str])?new t._Code(e._items.reduce((e,r)=>(r instanceof t.Name&&(r=n(r)),r instanceof t._Code?e.push(...r._items):e.push(r),e),[])):e;var a;function n(e){const t=o[e.str];return void 0===t||1!==r[e.str]?e:(delete r[e.str],t)}}function C(e,t){for(const r in t)e[r]=(e[r]||0)-(t[r]||0)}function T(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:t._`!${I(e)}`}j.kind="finally",e.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new r.Scope({parent:e}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const r=this._extScope.value(e,t);return(this._values[r.prefix]||(this._values[r.prefix]=new Set)).add(r),r}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,r,o){const a=this._scope.toName(t);return void 0!==r&&o&&(this._constants[a.str]=r),this._leafNode(new s(e,a,r)),a}const(e,t,o){return this._def(r.varKinds.const,e,t,o)}let(e,t,o){return this._def(r.varKinds.let,e,t,o)}var(e,t,o){return this._def(r.varKinds.var,e,t,o)}assign(e,t,r){return this._leafNode(new i(e,t,r))}add(t,r){return this._leafNode(new c(t,e.operators.ADD,r))}code(e){return"function"==typeof e?e():e!==t.nil&&this._leafNode(new p(e)),this}object(...e){const r=["{"];for(const[o,a]of e)r.length>1&&r.push(","),r.push(o),(o!==a||this.opts.es5)&&(r.push(":"),(0,t.addCodeArg)(r,a));return r.push("}"),new t._Code(r)}if(e,t,r){if(this._blockNode(new y(e)),t&&r)this.code(t).else().code(r).endIf();else if(t)this.code(t).endIf();else if(r)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new y(e))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new _(e),t)}forRange(e,t,o,a,n=(this.opts.es5?r.varKinds.var:r.varKinds.let)){const s=this._scope.toName(e);return this._for(new $(n,s,t,o),()=>a(s))}forOf(e,o,a,n=r.varKinds.const){const s=this._scope.toName(e);if(this.opts.es5){const e=o instanceof t.Name?o:this.var("_arr",o);return this.forRange("_i",0,t._`${e}.length`,r=>{this.var(s,t._`${e}[${r}]`),a(s)})}return this._for(new b("of",n,s,o),()=>a(s))}forIn(e,o,a,n=(this.opts.es5?r.varKinds.var:r.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,t._`Object.keys(${o})`,a);const s=this._scope.toName(e);return this._for(new b("in",n,s,o),()=>a(s))}endFor(){return this._endBlockNode(v)}label(e){return this._leafNode(new l(e))}break(e){return this._leafNode(new d(e))}return(e){const t=new S;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(e,t,r){if(!t&&!r)throw new Error('CodeGen: "try" without "catch" and "finally"');const o=new P;if(this._blockNode(o),this.code(e),t){const e=this.name("e");this._currNode=o.catch=new E(e),t(e)}return r&&(this._currNode=o.finally=new j,this.code(r)),this._endBlockNode(E,j)}throw(e){return this._leafNode(new u(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const r=this._nodes.length-t;if(r<0||void 0!==e&&r!==e)throw new Error(`CodeGen: wrong number of nodes: ${r} vs ${e} expected`);return this._nodes.length=t,this}func(e,r=t.nil,o,a){return this._blockNode(new w(e,r,o)),a&&this.code(a).endFunc(),this}endFunc(){return this._endBlockNode(w)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const r=this._currNode;if(r instanceof e||t&&r instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},e.not=T;const N=R(e.operators.AND);e.and=function(...e){return e.reduce(N)};const A=R(e.operators.OR);function R(e){return(r,o)=>r===t.nil?o:o===t.nil?r:t._`${I(r)} ${e} ${I(o)}`}function I(e){return e instanceof t.Name?e:t._`(${e})`}e.or=function(...e){return e.reduce(A)}}(codegen);var util={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const t=codegen,r=code$1;function o(e,t=e.schema){const{opts:r,self:o}=e;if(!r.strictSchema)return;if("boolean"==typeof t)return;const a=o.RULES.keywords;for(const r in t)a[r]||p(e,`unknown keyword: "${r}"`)}function a(e,t){if("boolean"==typeof e)return!e;for(const r in e)if(t[r])return!0;return!1}function n(e){return"number"==typeof e?""+e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function s(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function i({mergeNames:e,mergeToName:r,mergeValues:o,resultToName:a}){return(n,s,i,c)=>{const l=void 0===i?s:i instanceof t.Name?(s instanceof t.Name?e(n,s,i):r(n,s,i),i):s instanceof t.Name?(r(n,i,s),s):o(s,i);return c!==t.Name||l instanceof t.Name?l:a(n,l)}}function c(e,r){if(!0===r)return e.var("props",!0);const o=e.var("props",t._`{}`);return void 0!==r&&l(e,o,r),o}function l(e,r,o){Object.keys(o).forEach(o=>e.assign(t._`${r}${(0,t.getProperty)(o)}`,!0))}e.toHash=function(e){const t={};for(const r of e)t[r]=!0;return t},e.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(o(e,t),!a(t,e.self.RULES.all))},e.checkUnknownRules=o,e.schemaHasRules=a,e.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const r in e)if("$ref"!==r&&t.all[r])return!0;return!1},e.schemaRefOrVal=function({topSchemaRef:e,schemaPath:r},o,a,n){if(!n){if("number"==typeof o||"boolean"==typeof o)return o;if("string"==typeof o)return t._`${o}`}return t._`${e}${r}${(0,t.getProperty)(a)}`},e.unescapeFragment=function(e){return s(decodeURIComponent(e))},e.escapeFragment=function(e){return encodeURIComponent(n(e))},e.escapeJsonPointer=n,e.unescapeJsonPointer=s,e.eachItem=function(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)},e.mergeEvaluated={props:i({mergeNames:(e,r,o)=>e.if(t._`${o} !== true && ${r} !== undefined`,()=>{e.if(t._`${r} === true`,()=>e.assign(o,!0),()=>e.assign(o,t._`${o} || {}`).code(t._`Object.assign(${o}, ${r})`))}),mergeToName:(e,r,o)=>e.if(t._`${o} !== true`,()=>{!0===r?e.assign(o,!0):(e.assign(o,t._`${o} || {}`),l(e,o,r))}),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:c}),items:i({mergeNames:(e,r,o)=>e.if(t._`${o} !== true && ${r} !== undefined`,()=>e.assign(o,t._`${r} === true ? true : ${o} > ${r} ? ${o} : ${r}`)),mergeToName:(e,r,o)=>e.if(t._`${o} !== true`,()=>e.assign(o,!0===r||t._`${o} > ${r} ? ${o} : ${r}`)),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},e.evaluatedPropsToName=c,e.setEvaluated=l;const d={};var u;function p(e,t,r=e.opts.strictSchema){if(r){if(t="strict mode: "+t,!0===r)throw new Error(t);e.self.logger.warn(t)}}e.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:d[t.code]||(d[t.code]=new r._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(u=e.Type||(e.Type={})),e.getErrorPath=function(e,r,o){if(e instanceof t.Name){const a=r===u.Num;return o?a?t._`"[" + ${e} + "]"`:t._`"['" + ${e} + "']"`:a?t._`"/" + ${e}`:t._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return o?(0,t.getProperty)(e).toString():"/"+n(e)},e.checkStrictMode=p}(util);var names$1={};Object.defineProperty(names$1,"__esModule",{value:!0});const codegen_1$t=codegen,names={data:new codegen_1$t.Name("data"),valCxt:new codegen_1$t.Name("valCxt"),instancePath:new codegen_1$t.Name("instancePath"),parentData:new codegen_1$t.Name("parentData"),parentDataProperty:new codegen_1$t.Name("parentDataProperty"),rootData:new codegen_1$t.Name("rootData"),dynamicAnchors:new codegen_1$t.Name("dynamicAnchors"),vErrors:new codegen_1$t.Name("vErrors"),errors:new codegen_1$t.Name("errors"),this:new codegen_1$t.Name("this"),self:new codegen_1$t.Name("self"),scope:new codegen_1$t.Name("scope"),json:new codegen_1$t.Name("json"),jsonPos:new codegen_1$t.Name("jsonPos"),jsonLen:new codegen_1$t.Name("jsonLen"),jsonPart:new codegen_1$t.Name("jsonPart")};names$1.default=names,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=codegen,r=util,o=names$1;function a(e,r){const a=e.const("err",r);e.if(t._`${o.default.vErrors} === null`,()=>e.assign(o.default.vErrors,t._`[${a}]`),t._`${o.default.vErrors}.push(${a})`),e.code(t._`${o.default.errors}++`)}function n(e,r){const{gen:o,validateName:a,schemaEnv:n}=e;n.$async?o.throw(t._`new ${e.ValidationError}(${r})`):(o.assign(t._`${a}.errors`,r),o.return(!1))}e.keywordError={message:({keyword:e})=>t.str`must pass "${e}" keyword validation`},e.keyword$DataError={message:({keyword:e,schemaType:r})=>r?t.str`"${e}" keyword must be ${r} ($data)`:t.str`"${e}" keyword is invalid ($data)`},e.reportError=function(r,o=e.keywordError,s,c){const{it:l}=r,{gen:d,compositeRule:u,allErrors:p}=l,f=i(r,o,s);(null!=c?c:u||p)?a(d,f):n(l,t._`[${f}]`)},e.reportExtraError=function(t,r=e.keywordError,s){const{it:c}=t,{gen:l,compositeRule:d,allErrors:u}=c;a(l,i(t,r,s)),d||u||n(c,o.default.vErrors)},e.resetErrorsCount=function(e,r){e.assign(o.default.errors,r),e.if(t._`${o.default.vErrors} !== null`,()=>e.if(r,()=>e.assign(t._`${o.default.vErrors}.length`,r),()=>e.assign(o.default.vErrors,null)))},e.extendErrors=function({gen:e,keyword:r,schemaValue:a,data:n,errsCount:s,it:i}){if(void 0===s)throw new Error("ajv implementation error");const c=e.name("err");e.forRange("i",s,o.default.errors,s=>{e.const(c,t._`${o.default.vErrors}[${s}]`),e.if(t._`${c}.instancePath === undefined`,()=>e.assign(t._`${c}.instancePath`,(0,t.strConcat)(o.default.instancePath,i.errorPath))),e.assign(t._`${c}.schemaPath`,t.str`${i.errSchemaPath}/${r}`),i.opts.verbose&&(e.assign(t._`${c}.schema`,a),e.assign(t._`${c}.data`,n))})};const s={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function i(e,r,a){const{createErrors:n}=e.it;return!1===n?t._`{}`:function(e,r,a={}){const{gen:n,it:i}=e,d=[c(i,a),l(e,a)];return function(e,{params:r,message:a},n){const{keyword:i,data:c,schemaValue:l,it:d}=e,{opts:u,propertyName:p,topSchemaRef:f,schemaPath:h}=d;n.push([s.keyword,i],[s.params,"function"==typeof r?r(e):r||t._`{}`]),u.messages&&n.push([s.message,"function"==typeof a?a(e):a]),u.verbose&&n.push([s.schema,l],[s.parentSchema,t._`${f}${h}`],[o.default.data,c]),p&&n.push([s.propertyName,p])}(e,r,d),n.object(...d)}(e,r,a)}function c({errorPath:e},{instancePath:a}){const n=a?t.str`${e}${(0,r.getErrorPath)(a,r.Type.Str)}`:e;return[o.default.instancePath,(0,t.strConcat)(o.default.instancePath,n)]}function l({keyword:e,it:{errSchemaPath:o}},{schemaPath:a,parentSchema:n}){let i=n?o:t.str`${o}/${e}`;return a&&(i=t.str`${i}${(0,r.getErrorPath)(a,r.Type.Str)}`),[s.schemaPath,i]}}(errors),Object.defineProperty(boolSchema,"__esModule",{value:!0}),boolSchema.boolOrEmptySchema=boolSchema.topBoolOrEmptySchema=void 0;const errors_1$2=errors,codegen_1$s=codegen,names_1$6=names$1,boolError={message:"boolean schema is false"};function topBoolOrEmptySchema(e){const{gen:t,schema:r,validateName:o}=e;!1===r?falseSchemaError(e,!1):"object"==typeof r&&!0===r.$async?t.return(names_1$6.default.data):(t.assign(codegen_1$s._`${o}.errors`,null),t.return(!0))}function boolOrEmptySchema(e,t){const{gen:r,schema:o}=e;!1===o?(r.var(t,!1),falseSchemaError(e)):r.var(t,!0)}function falseSchemaError(e,t){const{gen:r,data:o}=e,a={gen:r,keyword:"false schema",data:o,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,errors_1$2.reportError)(a,boolError,void 0,t)}boolSchema.topBoolOrEmptySchema=topBoolOrEmptySchema,boolSchema.boolOrEmptySchema=boolOrEmptySchema;var dataType={},rules={};Object.defineProperty(rules,"__esModule",{value:!0}),rules.getRules=rules.isJSONType=void 0;const _jsonTypes=["string","number","integer","boolean","null","object","array"],jsonTypes=new Set(_jsonTypes);function isJSONType(e){return"string"==typeof e&&jsonTypes.has(e)}function getRules(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}rules.isJSONType=isJSONType,rules.getRules=getRules;var applicability={};function schemaHasRulesForType({schema:e,self:t},r){const o=t.RULES.types[r];return o&&!0!==o&&shouldUseGroup(e,o)}function shouldUseGroup(e,t){return t.rules.some(t=>shouldUseRule(e,t))}function shouldUseRule(e,t){var r;return void 0!==e[t.keyword]||(null===(r=t.definition.implements)||void 0===r?void 0:r.some(t=>void 0!==e[t]))}Object.defineProperty(applicability,"__esModule",{value:!0}),applicability.shouldUseRule=applicability.shouldUseGroup=applicability.schemaHasRulesForType=void 0,applicability.schemaHasRulesForType=schemaHasRulesForType,applicability.shouldUseGroup=shouldUseGroup,applicability.shouldUseRule=shouldUseRule,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const t=rules,r=applicability,o=errors,a=codegen,n=util;var s;function i(e){const r=Array.isArray(e)?e:e?[e]:[];if(r.every(t.isJSONType))return r;throw new Error("type must be JSONType or JSONType[]: "+r.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(s=e.DataType||(e.DataType={})),e.getSchemaTypes=function(e){const t=i(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},e.getJSONTypes=i,e.coerceAndCheckDataType=function(e,t){const{gen:o,data:n,opts:i}=e,l=function(e,t){return t?e.filter(e=>c.has(e)||"array"===t&&"array"===e):[]}(t,i.coerceTypes),u=t.length>0&&!(0===l.length&&1===t.length&&(0,r.schemaHasRulesForType)(e,t[0]));if(u){const r=d(t,n,i.strictNumbers,s.Wrong);o.if(r,()=>{l.length?function(e,t,r){const{gen:o,data:n,opts:s}=e,i=o.let("dataType",a._`typeof ${n}`),l=o.let("coerced",a._`undefined`);"array"===s.coerceTypes&&o.if(a._`${i} == 'object' && Array.isArray(${n}) && ${n}.length == 1`,()=>o.assign(n,a._`${n}[0]`).assign(i,a._`typeof ${n}`).if(d(t,n,s.strictNumbers),()=>o.assign(l,n))),o.if(a._`${l} !== undefined`);for(const e of r)(c.has(e)||"array"===e&&"array"===s.coerceTypes)&&u(e);function u(e){switch(e){case"string":return void o.elseIf(a._`${i} == "number" || ${i} == "boolean"`).assign(l,a._`"" + ${n}`).elseIf(a._`${n} === null`).assign(l,a._`""`);case"number":return void o.elseIf(a._`${i} == "boolean" || ${n} === null
              || (${i} == "string" && ${n} && ${n} == +${n})`).assign(l,a._`+${n}`);case"integer":return void o.elseIf(a._`${i} === "boolean" || ${n} === null
              || (${i} === "string" && ${n} && ${n} == +${n} && !(${n} % 1))`).assign(l,a._`+${n}`);case"boolean":return void o.elseIf(a._`${n} === "false" || ${n} === 0 || ${n} === null`).assign(l,!1).elseIf(a._`${n} === "true" || ${n} === 1`).assign(l,!0);case"null":return o.elseIf(a._`${n} === "" || ${n} === 0 || ${n} === false`),void o.assign(l,null);case"array":o.elseIf(a._`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${n} === null`).assign(l,a._`[${n}]`)}}o.else(),p(e),o.endIf(),o.if(a._`${l} !== undefined`,()=>{o.assign(n,l),function({gen:e,parentData:t,parentDataProperty:r},o){e.if(a._`${t} !== undefined`,()=>e.assign(a._`${t}[${r}]`,o))}(e,l)})}(e,t,l):p(e)})}return u};const c=new Set(["string","number","integer","boolean","null"]);function l(e,t,r,o=s.Correct){const n=o===s.Correct?a.operators.EQ:a.operators.NEQ;let i;switch(e){case"null":return a._`${t} ${n} null`;case"array":i=a._`Array.isArray(${t})`;break;case"object":i=a._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=c(a._`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=c();break;default:return a._`typeof ${t} ${n} ${e}`}return o===s.Correct?i:(0,a.not)(i);function c(e=a.nil){return(0,a.and)(a._`typeof ${t} == "number"`,e,r?a._`isFinite(${t})`:a.nil)}}function d(e,t,r,o){if(1===e.length)return l(e[0],t,r,o);let s;const i=(0,n.toHash)(e);if(i.array&&i.object){const e=a._`typeof ${t} != "object"`;s=i.null?e:a._`!${t} || ${e}`,delete i.null,delete i.array,delete i.object}else s=a.nil;i.number&&delete i.integer;for(const e in i)s=(0,a.and)(s,l(e,t,r,o));return s}e.checkDataType=l,e.checkDataTypes=d;const u={message:({schema:e})=>"must be "+e,params:({schema:e,schemaValue:t})=>"string"==typeof e?a._`{type: ${e}}`:a._`{type: ${t}}`};function p(e){const t=function(e){const{gen:t,data:r,schema:o}=e,a=(0,n.schemaRefOrVal)(e,o,"type");return{gen:t,keyword:"type",data:r,schema:o.type,schemaCode:a,schemaValue:a,parentSchema:o,params:{},it:e}}(e);(0,o.reportError)(t,u)}e.reportTypeError=p}(dataType);var defaults={};Object.defineProperty(defaults,"__esModule",{value:!0}),defaults.assignDefaults=void 0;const codegen_1$r=codegen,util_1$p=util;function assignDefaults(e,t){const{properties:r,items:o}=e.schema;if("object"===t&&r)for(const t in r)assignDefault(e,t,r[t].default);else"array"===t&&Array.isArray(o)&&o.forEach((t,r)=>assignDefault(e,r,t.default))}function assignDefault(e,t,r){const{gen:o,compositeRule:a,data:n,opts:s}=e;if(void 0===r)return;const i=codegen_1$r._`${n}${(0,codegen_1$r.getProperty)(t)}`;if(a)return void(0,util_1$p.checkStrictMode)(e,"default is ignored for: "+i);let c=codegen_1$r._`${i} === undefined`;"empty"===s.useDefaults&&(c=codegen_1$r._`${c} || ${i} === null || ${i} === ""`),o.if(c,codegen_1$r._`${i} = ${(0,codegen_1$r.stringify)(r)}`)}defaults.assignDefaults=assignDefaults;var keyword={},code={};Object.defineProperty(code,"__esModule",{value:!0}),code.validateUnion=code.validateArray=code.usePattern=code.callValidateCode=code.schemaProperties=code.allSchemaProperties=code.noPropertyInData=code.propertyInData=code.isOwnProperty=code.hasPropFunc=code.reportMissingProp=code.checkMissingProp=code.checkReportMissingProp=void 0;const codegen_1$q=codegen,util_1$o=util,names_1$5=names$1,util_2$1=util;function checkReportMissingProp(e,t){const{gen:r,data:o,it:a}=e;r.if(noPropertyInData(r,o,t,a.opts.ownProperties),()=>{e.setParams({missingProperty:codegen_1$q._`${t}`},!0),e.error()})}function checkMissingProp({gen:e,data:t,it:{opts:r}},o,a){return(0,codegen_1$q.or)(...o.map(o=>(0,codegen_1$q.and)(noPropertyInData(e,t,o,r.ownProperties),codegen_1$q._`${a} = ${o}`)))}function reportMissingProp(e,t){e.setParams({missingProperty:t},!0),e.error()}function hasPropFunc(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:codegen_1$q._`Object.prototype.hasOwnProperty`})}function isOwnProperty(e,t,r){return codegen_1$q._`${hasPropFunc(e)}.call(${t}, ${r})`}function propertyInData(e,t,r,o){const a=codegen_1$q._`${t}${(0,codegen_1$q.getProperty)(r)} !== undefined`;return o?codegen_1$q._`${a} && ${isOwnProperty(e,t,r)}`:a}function noPropertyInData(e,t,r,o){const a=codegen_1$q._`${t}${(0,codegen_1$q.getProperty)(r)} === undefined`;return o?(0,codegen_1$q.or)(a,(0,codegen_1$q.not)(isOwnProperty(e,t,r))):a}function allSchemaProperties(e){return e?Object.keys(e).filter(e=>"__proto__"!==e):[]}function schemaProperties(e,t){return allSchemaProperties(t).filter(r=>!(0,util_1$o.alwaysValidSchema)(e,t[r]))}function callValidateCode({schemaCode:e,data:t,it:{gen:r,topSchemaRef:o,schemaPath:a,errorPath:n},it:s},i,c,l){const d=l?codegen_1$q._`${e}, ${t}, ${o}${a}`:t,u=[[names_1$5.default.instancePath,(0,codegen_1$q.strConcat)(names_1$5.default.instancePath,n)],[names_1$5.default.parentData,s.parentData],[names_1$5.default.parentDataProperty,s.parentDataProperty],[names_1$5.default.rootData,names_1$5.default.rootData]];s.opts.dynamicRef&&u.push([names_1$5.default.dynamicAnchors,names_1$5.default.dynamicAnchors]);const p=codegen_1$q._`${d}, ${r.object(...u)}`;return c!==codegen_1$q.nil?codegen_1$q._`${i}.call(${c}, ${p})`:codegen_1$q._`${i}(${p})`}code.checkReportMissingProp=checkReportMissingProp,code.checkMissingProp=checkMissingProp,code.reportMissingProp=reportMissingProp,code.hasPropFunc=hasPropFunc,code.isOwnProperty=isOwnProperty,code.propertyInData=propertyInData,code.noPropertyInData=noPropertyInData,code.allSchemaProperties=allSchemaProperties,code.schemaProperties=schemaProperties,code.callValidateCode=callValidateCode;const newRegExp=codegen_1$q._`new RegExp`;function usePattern({gen:e,it:{opts:t}},r){const o=t.unicodeRegExp?"u":"",{regExp:a}=t.code,n=a(r,o);return e.scopeValue("pattern",{key:n.toString(),ref:n,code:codegen_1$q._`${"new RegExp"===a.code?newRegExp:(0,util_2$1.useFunc)(e,a)}(${r}, ${o})`})}function validateArray(e){const{gen:t,data:r,keyword:o,it:a}=e,n=t.name("valid");if(a.allErrors){const e=t.let("valid",!0);return s(()=>t.assign(e,!1)),e}return t.var(n,!0),s(()=>t.break()),n;function s(a){const s=t.const("len",codegen_1$q._`${r}.length`);t.forRange("i",0,s,r=>{e.subschema({keyword:o,dataProp:r,dataPropType:util_1$o.Type.Num},n),t.if((0,codegen_1$q.not)(n),a)})}}function validateUnion(e){const{gen:t,schema:r,keyword:o,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(e=>(0,util_1$o.alwaysValidSchema)(a,e))&&!a.opts.unevaluated)return;const n=t.let("valid",!1),s=t.name("_valid");t.block(()=>r.forEach((r,a)=>{const i=e.subschema({keyword:o,schemaProp:a,compositeRule:!0},s);t.assign(n,codegen_1$q._`${n} || ${s}`),e.mergeValidEvaluated(i,s)||t.if((0,codegen_1$q.not)(n))})),e.result(n,()=>e.reset(),()=>e.error(!0))}code.usePattern=usePattern,code.validateArray=validateArray,code.validateUnion=validateUnion,Object.defineProperty(keyword,"__esModule",{value:!0}),keyword.validateKeywordUsage=keyword.validSchemaType=keyword.funcKeywordCode=keyword.macroKeywordCode=void 0;const codegen_1$p=codegen,names_1$4=names$1,code_1$9=code,errors_1$1=errors;function macroKeywordCode(e,t){const{gen:r,keyword:o,schema:a,parentSchema:n,it:s}=e,i=t.macro.call(s.self,a,n,s),c=useKeyword(r,o,i);!1!==s.opts.validateSchema&&s.self.validateSchema(i,!0);const l=r.name("valid");e.subschema({schema:i,schemaPath:codegen_1$p.nil,errSchemaPath:`${s.errSchemaPath}/${o}`,topSchemaRef:c,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}function funcKeywordCode(e,t){var r;const{gen:o,keyword:a,schema:n,parentSchema:s,$data:i,it:c}=e;checkAsyncKeyword(c,t);const l=!i&&t.compile?t.compile.call(c.self,n,s,c):t.validate,d=useKeyword(o,a,l),u=o.let("valid");function p(r=(t.async?codegen_1$p._`await `:codegen_1$p.nil)){const a=c.opts.passContext?names_1$4.default.this:names_1$4.default.self,n=!("compile"in t&&!i||!1===t.schema);o.assign(u,codegen_1$p._`${r}${(0,code_1$9.callValidateCode)(e,d,a,n)}`,t.modifying)}function f(e){var r;o.if((0,codegen_1$p.not)(null!==(r=t.valid)&&void 0!==r?r:u),e)}e.block$data(u,(function(){if(!1===t.errors)p(),t.modifying&&modifyData(e),f(()=>e.error());else{const r=t.async?function(){const e=o.let("ruleErrs",null);return o.try(()=>p(codegen_1$p._`await `),t=>o.assign(u,!1).if(codegen_1$p._`${t} instanceof ${c.ValidationError}`,()=>o.assign(e,codegen_1$p._`${t}.errors`),()=>o.throw(t))),e}():function(){const e=codegen_1$p._`${d}.errors`;return o.assign(e,null),p(codegen_1$p.nil),e}();t.modifying&&modifyData(e),f(()=>addErrs(e,r))}})),e.ok(null!==(r=t.valid)&&void 0!==r?r:u)}function modifyData(e){const{gen:t,data:r,it:o}=e;t.if(o.parentData,()=>t.assign(r,codegen_1$p._`${o.parentData}[${o.parentDataProperty}]`))}function addErrs(e,t){const{gen:r}=e;r.if(codegen_1$p._`Array.isArray(${t})`,()=>{r.assign(names_1$4.default.vErrors,codegen_1$p._`${names_1$4.default.vErrors} === null ? ${t} : ${names_1$4.default.vErrors}.concat(${t})`).assign(names_1$4.default.errors,codegen_1$p._`${names_1$4.default.vErrors}.length`),(0,errors_1$1.extendErrors)(e)},()=>e.error())}function checkAsyncKeyword({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function useKeyword(e,t,r){if(void 0===r)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:(0,codegen_1$p.stringify)(r)})}function validSchemaType(e,t,r=!1){return!t.length||t.some(t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||r&&void 0===e)}function validateKeywordUsage({schema:e,opts:t,self:r,errSchemaPath:o},a,n){if(Array.isArray(a.keyword)?!a.keyword.includes(n):a.keyword!==n)throw new Error("ajv implementation error");const s=a.dependencies;if(null==s?void 0:s.some(t=>!Object.prototype.hasOwnProperty.call(e,t)))throw new Error(`parent schema must have dependencies of ${n}: ${s.join(",")}`);if(a.validateSchema&&!a.validateSchema(e[n])){const e=`keyword "${n}" value is invalid at path "${o}": `+r.errorsText(a.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);r.logger.error(e)}}keyword.macroKeywordCode=macroKeywordCode,keyword.funcKeywordCode=funcKeywordCode,keyword.validSchemaType=validSchemaType,keyword.validateKeywordUsage=validateKeywordUsage;var subschema={};Object.defineProperty(subschema,"__esModule",{value:!0}),subschema.extendSubschemaMode=subschema.extendSubschemaData=subschema.getSubschema=void 0;const codegen_1$o=codegen,util_1$n=util;function getSubschema(e,{keyword:t,schemaProp:r,schema:o,schemaPath:a,errSchemaPath:n,topSchemaRef:s}){if(void 0!==t&&void 0!==o)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const o=e.schema[t];return void 0===r?{schema:o,schemaPath:codegen_1$o._`${e.schemaPath}${(0,codegen_1$o.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:o[r],schemaPath:codegen_1$o._`${e.schemaPath}${(0,codegen_1$o.getProperty)(t)}${(0,codegen_1$o.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,util_1$n.escapeFragment)(r)}`}}if(void 0!==o){if(void 0===a||void 0===n||void 0===s)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:o,schemaPath:a,topSchemaRef:s,errSchemaPath:n}}throw new Error('either "keyword" or "schema" must be passed')}function extendSubschemaData(e,t,{dataProp:r,dataPropType:o,data:a,dataTypes:n,propertyName:s}){if(void 0!==a&&void 0!==r)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:i}=t;if(void 0!==r){const{errorPath:a,dataPathArr:n,opts:s}=t;c(i.let("data",codegen_1$o._`${t.data}${(0,codegen_1$o.getProperty)(r)}`,!0)),e.errorPath=codegen_1$o.str`${a}${(0,util_1$n.getErrorPath)(r,o,s.jsPropertySyntax)}`,e.parentDataProperty=codegen_1$o._`${r}`,e.dataPathArr=[...n,e.parentDataProperty]}function c(r){e.data=r,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,r]}void 0!==a&&(c(a instanceof codegen_1$o.Name?a:i.let("data",a,!0)),void 0!==s&&(e.propertyName=s)),n&&(e.dataTypes=n)}function extendSubschemaMode(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:o,createErrors:a,allErrors:n}){void 0!==o&&(e.compositeRule=o),void 0!==a&&(e.createErrors=a),void 0!==n&&(e.allErrors=n),e.jtdDiscriminator=t,e.jtdMetadata=r}subschema.getSubschema=getSubschema,subschema.extendSubschemaData=extendSubschemaData,subschema.extendSubschemaMode=extendSubschemaMode;var resolve$1={},fastDeepEqual=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var o,a,n;if(Array.isArray(t)){if((o=t.length)!=r.length)return!1;for(a=o;0!=a--;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((o=(n=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=o;0!=a--;)if(!Object.prototype.hasOwnProperty.call(r,n[a]))return!1;for(a=o;0!=a--;){var s=n[a];if(!e(t[s],r[s]))return!1}return!0}return t!=t&&r!=r},jsonSchemaTraverse={exports:{}},traverse$1=jsonSchemaTraverse.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),_traverse(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};function _traverse(e,t,r,o,a,n,s,i,c,l){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var d in t(o,a,n,s,i,c,l),o){var u=o[d];if(Array.isArray(u)){if(d in traverse$1.arrayKeywords)for(var p=0;p<u.length;p++)_traverse(e,t,r,u[p],a+"/"+d+"/"+p,n,a,d,o,p)}else if(d in traverse$1.propsKeywords){if(u&&"object"==typeof u)for(var f in u)_traverse(e,t,r,u[f],a+"/"+d+"/"+escapeJsonPtr(f),n,a,d,o,f)}else(d in traverse$1.keywords||e.allKeys&&!(d in traverse$1.skipKeywords))&&_traverse(e,t,r,u,a+"/"+d,n,a,d,o)}r(o,a,n,s,i,c,l)}}function escapeJsonPtr(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}traverse$1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},traverse$1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},traverse$1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},traverse$1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0},Object.defineProperty(resolve$1,"__esModule",{value:!0}),resolve$1.getSchemaRefs=resolve$1.resolveUrl=resolve$1.normalizeId=resolve$1._getFullPath=resolve$1.getFullPath=resolve$1.inlineRef=void 0;const util_1$m=util,equal$2=fastDeepEqual,traverse=jsonSchemaTraverse.exports,SIMPLE_INLINED=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function inlineRef(e,t=!0){return"boolean"==typeof e||(!0===t?!hasRef(e):!!t&&countKeys(e)<=t)}resolve$1.inlineRef=inlineRef;const REF_KEYWORDS=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function hasRef(e){for(const t in e){if(REF_KEYWORDS.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(hasRef))return!0;if("object"==typeof r&&hasRef(r))return!0}return!1}function countKeys(e){let t=0;for(const r in e){if("$ref"===r)return 1/0;if(t++,!SIMPLE_INLINED.has(r)&&("object"==typeof e[r]&&(0,util_1$m.eachItem)(e[r],e=>t+=countKeys(e)),t===1/0))return 1/0}return t}function getFullPath(e,t="",r){!1!==r&&(t=normalizeId(t));const o=e.parse(t);return _getFullPath(e,o)}function _getFullPath(e,t){return e.serialize(t).split("#")[0]+"#"}resolve$1.getFullPath=getFullPath,resolve$1._getFullPath=_getFullPath;const TRAILING_SLASH_HASH=/#\/?$/;function normalizeId(e){return e?e.replace(TRAILING_SLASH_HASH,""):""}function resolveUrl(e,t,r){return r=normalizeId(r),e.resolve(t,r)}resolve$1.normalizeId=normalizeId,resolve$1.resolveUrl=resolveUrl;const ANCHOR=/^[a-z_][-a-z0-9._]*$/i;function getSchemaRefs(e,t){if("boolean"==typeof e)return{};const{schemaId:r,uriResolver:o}=this.opts,a=normalizeId(e[r]||t),n={"":a},s=getFullPath(o,a,!1),i={},c=new Set;return traverse(e,{allKeys:!0},(e,t,o,a)=>{if(void 0===a)return;const u=s+t;let p=n[a];function f(t){const r=this.opts.uriResolver.resolve;if(t=normalizeId(p?r(p,t):t),c.has(t))throw d(t);c.add(t);let o=this.refs[t];return"string"==typeof o&&(o=this.refs[o]),"object"==typeof o?l(e,o.schema,t):t!==normalizeId(u)&&("#"===t[0]?(l(e,i[t],t),i[t]=e):this.refs[t]=u),t}function h(e){if("string"==typeof e){if(!ANCHOR.test(e))throw new Error(`invalid anchor "${e}"`);f.call(this,"#"+e)}}"string"==typeof e[r]&&(p=f.call(this,e[r])),h.call(this,e.$anchor),h.call(this,e.$dynamicAnchor),n[t]=p}),i;function l(e,t,r){if(void 0!==t&&!equal$2(e,t))throw d(r)}function d(e){return new Error(`reference "${e}" resolves to more than one schema`)}}resolve$1.getSchemaRefs=getSchemaRefs,Object.defineProperty(validate$1,"__esModule",{value:!0}),validate$1.getData=validate$1.KeywordCxt=validate$1.validateFunctionCode=void 0;const boolSchema_1=boolSchema,dataType_1$1=dataType,applicability_1=applicability,dataType_2=dataType,defaults_1=defaults,keyword_1=keyword,subschema_1=subschema,codegen_1$n=codegen,names_1$3=names$1,resolve_1$2=resolve$1,util_1$l=util,errors_1=errors;function validateFunctionCode(e){isSchemaObj(e)&&(checkKeywords(e),schemaCxtHasRules(e))?topSchemaObjCode(e):validateFunction(e,()=>(0,boolSchema_1.topBoolOrEmptySchema)(e))}function validateFunction({gen:e,validateName:t,schema:r,schemaEnv:o,opts:a},n){a.code.es5?e.func(t,codegen_1$n._`${names_1$3.default.data}, ${names_1$3.default.valCxt}`,o.$async,()=>{e.code(codegen_1$n._`"use strict"; ${funcSourceUrl(r,a)}`),destructureValCxtES5(e,a),e.code(n)}):e.func(t,codegen_1$n._`${names_1$3.default.data}, ${destructureValCxt(a)}`,o.$async,()=>e.code(funcSourceUrl(r,a)).code(n))}function destructureValCxt(e){return codegen_1$n._`{${names_1$3.default.instancePath}="", ${names_1$3.default.parentData}, ${names_1$3.default.parentDataProperty}, ${names_1$3.default.rootData}=${names_1$3.default.data}${e.dynamicRef?codegen_1$n._`, ${names_1$3.default.dynamicAnchors}={}`:codegen_1$n.nil}}={}`}function destructureValCxtES5(e,t){e.if(names_1$3.default.valCxt,()=>{e.var(names_1$3.default.instancePath,codegen_1$n._`${names_1$3.default.valCxt}.${names_1$3.default.instancePath}`),e.var(names_1$3.default.parentData,codegen_1$n._`${names_1$3.default.valCxt}.${names_1$3.default.parentData}`),e.var(names_1$3.default.parentDataProperty,codegen_1$n._`${names_1$3.default.valCxt}.${names_1$3.default.parentDataProperty}`),e.var(names_1$3.default.rootData,codegen_1$n._`${names_1$3.default.valCxt}.${names_1$3.default.rootData}`),t.dynamicRef&&e.var(names_1$3.default.dynamicAnchors,codegen_1$n._`${names_1$3.default.valCxt}.${names_1$3.default.dynamicAnchors}`)},()=>{e.var(names_1$3.default.instancePath,codegen_1$n._`""`),e.var(names_1$3.default.parentData,codegen_1$n._`undefined`),e.var(names_1$3.default.parentDataProperty,codegen_1$n._`undefined`),e.var(names_1$3.default.rootData,names_1$3.default.data),t.dynamicRef&&e.var(names_1$3.default.dynamicAnchors,codegen_1$n._`{}`)})}function topSchemaObjCode(e){const{schema:t,opts:r,gen:o}=e;validateFunction(e,()=>{r.$comment&&t.$comment&&commentKeyword(e),checkNoDefault(e),o.let(names_1$3.default.vErrors,null),o.let(names_1$3.default.errors,0),r.unevaluated&&resetEvaluated(e),typeAndKeywords(e),returnResults(e)})}function resetEvaluated(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",codegen_1$n._`${r}.evaluated`),t.if(codegen_1$n._`${e.evaluated}.dynamicProps`,()=>t.assign(codegen_1$n._`${e.evaluated}.props`,codegen_1$n._`undefined`)),t.if(codegen_1$n._`${e.evaluated}.dynamicItems`,()=>t.assign(codegen_1$n._`${e.evaluated}.items`,codegen_1$n._`undefined`))}function funcSourceUrl(e,t){const r="object"==typeof e&&e[t.schemaId];return r&&(t.code.source||t.code.process)?codegen_1$n._`/*# sourceURL=${r} */`:codegen_1$n.nil}function subschemaCode(e,t){isSchemaObj(e)&&(checkKeywords(e),schemaCxtHasRules(e))?subSchemaObjCode(e,t):(0,boolSchema_1.boolOrEmptySchema)(e,t)}function schemaCxtHasRules({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function isSchemaObj(e){return"boolean"!=typeof e.schema}function subSchemaObjCode(e,t){const{schema:r,gen:o,opts:a}=e;a.$comment&&r.$comment&&commentKeyword(e),updateContext(e),checkAsyncSchema(e);const n=o.const("_errs",names_1$3.default.errors);typeAndKeywords(e,n),o.var(t,codegen_1$n._`${n} === ${names_1$3.default.errors}`)}function checkKeywords(e){(0,util_1$l.checkUnknownRules)(e),checkRefsAndKeywords(e)}function typeAndKeywords(e,t){if(e.opts.jtd)return schemaKeywords(e,[],!1,t);const r=(0,dataType_1$1.getSchemaTypes)(e.schema);schemaKeywords(e,r,!(0,dataType_1$1.coerceAndCheckDataType)(e,r),t)}function checkRefsAndKeywords(e){const{schema:t,errSchemaPath:r,opts:o,self:a}=e;t.$ref&&o.ignoreKeywordsWithRef&&(0,util_1$l.schemaHasRulesButRef)(t,a.RULES)&&a.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function checkNoDefault(e){const{schema:t,opts:r}=e;void 0!==t.default&&r.useDefaults&&r.strictSchema&&(0,util_1$l.checkStrictMode)(e,"default is ignored in the schema root")}function updateContext(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,resolve_1$2.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function checkAsyncSchema(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function commentKeyword({gen:e,schemaEnv:t,schema:r,errSchemaPath:o,opts:a}){const n=r.$comment;if(!0===a.$comment)e.code(codegen_1$n._`${names_1$3.default.self}.logger.log(${n})`);else if("function"==typeof a.$comment){const r=codegen_1$n.str`${o}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code(codegen_1$n._`${names_1$3.default.self}.opts.$comment(${n}, ${r}, ${a}.schema)`)}}function returnResults(e){const{gen:t,schemaEnv:r,validateName:o,ValidationError:a,opts:n}=e;r.$async?t.if(codegen_1$n._`${names_1$3.default.errors} === 0`,()=>t.return(names_1$3.default.data),()=>t.throw(codegen_1$n._`new ${a}(${names_1$3.default.vErrors})`)):(t.assign(codegen_1$n._`${o}.errors`,names_1$3.default.vErrors),n.unevaluated&&assignEvaluated(e),t.return(codegen_1$n._`${names_1$3.default.errors} === 0`))}function assignEvaluated({gen:e,evaluated:t,props:r,items:o}){r instanceof codegen_1$n.Name&&e.assign(codegen_1$n._`${t}.props`,r),o instanceof codegen_1$n.Name&&e.assign(codegen_1$n._`${t}.items`,o)}function schemaKeywords(e,t,r,o){const{gen:a,schema:n,data:s,allErrors:i,opts:c,self:l}=e,{RULES:d}=l;function u(l){(0,applicability_1.shouldUseGroup)(n,l)&&(l.type?(a.if((0,dataType_2.checkDataType)(l.type,s,c.strictNumbers)),iterateKeywords(e,l),1===t.length&&t[0]===l.type&&r&&(a.else(),(0,dataType_2.reportTypeError)(e)),a.endIf()):iterateKeywords(e,l),i||a.if(codegen_1$n._`${names_1$3.default.errors} === ${o||0}`))}!n.$ref||!c.ignoreKeywordsWithRef&&(0,util_1$l.schemaHasRulesButRef)(n,d)?(c.jtd||checkStrictTypes(e,t),a.block(()=>{for(const e of d.rules)u(e);u(d.post)})):a.block(()=>keywordCode(e,"$ref",d.all.$ref.definition))}function iterateKeywords(e,t){const{gen:r,schema:o,opts:{useDefaults:a}}=e;a&&(0,defaults_1.assignDefaults)(e,t.type),r.block(()=>{for(const r of t.rules)(0,applicability_1.shouldUseRule)(o,r)&&keywordCode(e,r.keyword,r.definition,t.type)})}function checkStrictTypes(e,t){!e.schemaEnv.meta&&e.opts.strictTypes&&(checkContextTypes(e,t),e.opts.allowUnionTypes||checkMultipleTypes(e,t),checkKeywordTypes(e,e.dataTypes))}function checkContextTypes(e,t){t.length&&(e.dataTypes.length?(t.forEach(t=>{includesType(e.dataTypes,t)||strictTypesError(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)}),e.dataTypes=e.dataTypes.filter(e=>includesType(t,e))):e.dataTypes=t)}function checkMultipleTypes(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&strictTypesError(e,"use allowUnionTypes to allow union type keyword")}function checkKeywordTypes(e,t){const r=e.self.RULES.all;for(const o in r){const a=r[o];if("object"==typeof a&&(0,applicability_1.shouldUseRule)(e.schema,a)){const{type:r}=a.definition;r.length&&!r.some(e=>hasApplicableType(t,e))&&strictTypesError(e,`missing type "${r.join(",")}" for keyword "${o}"`)}}}function hasApplicableType(e,t){return e.includes(t)||"number"===t&&e.includes("integer")}function includesType(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function strictTypesError(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,util_1$l.checkStrictMode)(e,t,e.opts.strictTypes)}validate$1.validateFunctionCode=validateFunctionCode;class KeywordCxt{constructor(e,t,r){if((0,keyword_1.validateKeywordUsage)(e,t,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,util_1$l.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",getData(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,keyword_1.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",names_1$3.default.errors))}result(e,t,r){this.failResult((0,codegen_1$n.not)(e),t,r)}failResult(e,t,r){this.gen.if(e),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,codegen_1$n.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(codegen_1$n._`${t} !== undefined && (${(0,codegen_1$n.or)(this.invalid$data(),e)})`)}error(e,t,r){if(t)return this.setParams(t),this._error(e,r),void this.setParams({});this._error(e,r)}_error(e,t){(e?errors_1.reportExtraError:errors_1.reportError)(this,this.def.error,t)}$dataError(){(0,errors_1.reportError)(this,this.def.$dataError||errors_1.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,errors_1.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,r=codegen_1$n.nil){this.gen.block(()=>{this.check$data(e,r),t()})}check$data(e=codegen_1$n.nil,t=codegen_1$n.nil){if(!this.$data)return;const{gen:r,schemaCode:o,schemaType:a,def:n}=this;r.if((0,codegen_1$n.or)(codegen_1$n._`${o} === undefined`,t)),e!==codegen_1$n.nil&&r.assign(e,!0),(a.length||n.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==codegen_1$n.nil&&r.assign(e,!1)),r.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:r,def:o,it:a}=this;return(0,codegen_1$n.or)(function(){if(r.length){if(!(t instanceof codegen_1$n.Name))throw new Error("ajv implementation error");const e=Array.isArray(r)?r:[r];return codegen_1$n._`${(0,dataType_2.checkDataTypes)(e,t,a.opts.strictNumbers,dataType_2.DataType.Wrong)}`}return codegen_1$n.nil}(),function(){if(o.validateSchema){const r=e.scopeValue("validate$data",{ref:o.validateSchema});return codegen_1$n._`!${r}(${t})`}return codegen_1$n.nil}())}subschema(e,t){const r=(0,subschema_1.getSubschema)(this.it,e);(0,subschema_1.extendSubschemaData)(r,this.it,e),(0,subschema_1.extendSubschemaMode)(r,e);const o={...this.it,...r,items:void 0,props:void 0};return subschemaCode(o,t),o}mergeEvaluated(e,t){const{it:r,gen:o}=this;r.opts.unevaluated&&(!0!==r.props&&void 0!==e.props&&(r.props=util_1$l.mergeEvaluated.props(o,e.props,r.props,t)),!0!==r.items&&void 0!==e.items&&(r.items=util_1$l.mergeEvaluated.items(o,e.items,r.items,t)))}mergeValidEvaluated(e,t){const{it:r,gen:o}=this;if(r.opts.unevaluated&&(!0!==r.props||!0!==r.items))return o.if(t,()=>this.mergeEvaluated(e,codegen_1$n.Name)),!0}}function keywordCode(e,t,r,o){const a=new KeywordCxt(e,r,t);"code"in r?r.code(a,o):a.$data&&r.validate?(0,keyword_1.funcKeywordCode)(a,r):"macro"in r?(0,keyword_1.macroKeywordCode)(a,r):(r.compile||r.validate)&&(0,keyword_1.funcKeywordCode)(a,r)}validate$1.KeywordCxt=KeywordCxt;const JSON_POINTER=/^\/(?:[^~]|~0|~1)*$/,RELATIVE_JSON_POINTER=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function getData(e,{dataLevel:t,dataNames:r,dataPathArr:o}){let a,n;if(""===e)return names_1$3.default.rootData;if("/"===e[0]){if(!JSON_POINTER.test(e))throw new Error("Invalid JSON-pointer: "+e);a=e,n=names_1$3.default.rootData}else{const s=RELATIVE_JSON_POINTER.exec(e);if(!s)throw new Error("Invalid JSON-pointer: "+e);const i=+s[1];if(a=s[2],"#"===a){if(i>=t)throw new Error(c("property/index",i));return o[t-i]}if(i>t)throw new Error(c("data",i));if(n=r[t-i],!a)return n}let s=n;const i=a.split("/");for(const e of i)e&&(n=codegen_1$n._`${n}${(0,codegen_1$n.getProperty)((0,util_1$l.unescapeJsonPointer)(e))}`,s=codegen_1$n._`${s} && ${n}`);return s;function c(e,r){return`Cannot access ${e} ${r} levels up, current level is ${t}`}}validate$1.getData=getData;var validation_error={};Object.defineProperty(validation_error,"__esModule",{value:!0});class ValidationError extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}validation_error.default=ValidationError;var ref_error={};Object.defineProperty(ref_error,"__esModule",{value:!0});const resolve_1$1=resolve$1;class MissingRefError extends Error{constructor(e,t,r,o){super(o||`can't resolve reference ${r} from id ${t}`),this.missingRef=(0,resolve_1$1.resolveUrl)(e,t,r),this.missingSchema=(0,resolve_1$1.normalizeId)((0,resolve_1$1.getFullPath)(e,this.missingRef))}}ref_error.default=MissingRefError;var compile={};Object.defineProperty(compile,"__esModule",{value:!0}),compile.resolveSchema=compile.getCompilingSchema=compile.resolveRef=compile.compileSchema=compile.SchemaEnv=void 0;const codegen_1$m=codegen,validation_error_1=validation_error,names_1$2=names$1,resolve_1=resolve$1,util_1$k=util,validate_1$1=validate$1;class SchemaEnv{constructor(e){var t;let r;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,resolve_1.normalizeId)(null==r?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==r?void 0:r.$async,this.refs={}}}function compileSchema(e){const t=getCompilingSchema.call(this,e);if(t)return t;const r=(0,resolve_1.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:o,lines:a}=this.opts.code,{ownProperties:n}=this.opts,s=new codegen_1$m.CodeGen(this.scope,{es5:o,lines:a,ownProperties:n});let i;e.$async&&(i=s.scopeValue("Error",{ref:validation_error_1.default,code:codegen_1$m._`require("ajv/dist/runtime/validation_error").default`}));const c=s.scopeName("validate");e.validateName=c;const l={gen:s,allErrors:this.opts.allErrors,data:names_1$2.default.data,parentData:names_1$2.default.parentData,parentDataProperty:names_1$2.default.parentDataProperty,dataNames:[names_1$2.default.data],dataPathArr:[codegen_1$m.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:s.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,codegen_1$m.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:i,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:codegen_1$m.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:codegen_1$m._`""`,opts:this.opts,self:this};let d;try{this._compilations.add(e),(0,validate_1$1.validateFunctionCode)(l),s.optimize(this.opts.code.optimize);const t=s.toString();d=`${s.scopeRefs(names_1$2.default.scope)}return ${t}`,this.opts.code.process&&(d=this.opts.code.process(d,e));const r=new Function(""+names_1$2.default.self,""+names_1$2.default.scope,d)(this,this.scope.get());if(this.scope.value(c,{ref:r}),r.errors=null,r.schema=e.schema,r.schemaEnv=e,e.$async&&(r.$async=!0),!0===this.opts.code.source&&(r.source={validateName:c,validateCode:t,scopeValues:s._values}),this.opts.unevaluated){const{props:e,items:t}=l;r.evaluated={props:e instanceof codegen_1$m.Name?void 0:e,items:t instanceof codegen_1$m.Name?void 0:t,dynamicProps:e instanceof codegen_1$m.Name,dynamicItems:t instanceof codegen_1$m.Name},r.source&&(r.source.evaluated=(0,codegen_1$m.stringify)(r.evaluated))}return e.validate=r,e}catch(t){throw delete e.validate,delete e.validateName,d&&this.logger.error("Error compiling schema, function code:",d),t}finally{this._compilations.delete(e)}}function resolveRef(e,t,r){var o;r=(0,resolve_1.resolveUrl)(this.opts.uriResolver,t,r);const a=e.refs[r];if(a)return a;let n=resolve.call(this,e,r);if(void 0===n){const a=null===(o=e.localRefs)||void 0===o?void 0:o[r],{schemaId:s}=this.opts;a&&(n=new SchemaEnv({schema:a,schemaId:s,root:e,baseId:t}))}return void 0!==n?e.refs[r]=inlineOrCompile.call(this,n):void 0}function inlineOrCompile(e){return(0,resolve_1.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:compileSchema.call(this,e)}function getCompilingSchema(e){for(const t of this._compilations)if(sameSchemaEnv(t,e))return t}function sameSchemaEnv(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function resolve(e,t){let r;for(;"string"==typeof(r=this.refs[t]);)t=r;return r||this.schemas[t]||resolveSchema.call(this,e,t)}function resolveSchema(e,t){const r=this.opts.uriResolver.parse(t),o=(0,resolve_1._getFullPath)(this.opts.uriResolver,r);let a=(0,resolve_1.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&o===a)return getJsonPointer.call(this,r,e);const n=(0,resolve_1.normalizeId)(o),s=this.refs[n]||this.schemas[n];if("string"==typeof s){const t=resolveSchema.call(this,e,s);if("object"!=typeof(null==t?void 0:t.schema))return;return getJsonPointer.call(this,r,t)}if("object"==typeof(null==s?void 0:s.schema)){if(s.validate||compileSchema.call(this,s),n===(0,resolve_1.normalizeId)(t)){const{schema:t}=s,{schemaId:r}=this.opts,o=t[r];return o&&(a=(0,resolve_1.resolveUrl)(this.opts.uriResolver,a,o)),new SchemaEnv({schema:t,schemaId:r,root:e,baseId:a})}return getJsonPointer.call(this,r,s)}}compile.SchemaEnv=SchemaEnv,compile.compileSchema=compileSchema,compile.resolveRef=resolveRef,compile.getCompilingSchema=getCompilingSchema,compile.resolveSchema=resolveSchema;const PREVENT_SCOPE_CHANGE=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer(e,{baseId:t,schema:r,root:o}){var a;if("/"!==(null===(a=e.fragment)||void 0===a?void 0:a[0]))return;for(const o of e.fragment.slice(1).split("/")){if("boolean"==typeof r)return;const e=r[(0,util_1$k.unescapeFragment)(o)];if(void 0===e)return;const a="object"==typeof(r=e)&&r[this.opts.schemaId];!PREVENT_SCOPE_CHANGE.has(o)&&a&&(t=(0,resolve_1.resolveUrl)(this.opts.uriResolver,t,a))}let n;if("boolean"!=typeof r&&r.$ref&&!(0,util_1$k.schemaHasRulesButRef)(r,this.RULES)){const e=(0,resolve_1.resolveUrl)(this.opts.uriResolver,t,r.$ref);n=resolveSchema.call(this,o,e)}const{schemaId:s}=this.opts;return n=n||new SchemaEnv({schema:r,schemaId:s,root:o,baseId:t}),n.schema!==n.root.schema?n:void 0}var $id$1="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description="Meta-schema for $data reference (JSON AnySchema extension proposal)",type$1="object",required$1=["$data"],properties$2={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties$1=!1,require$$9={$id:$id$1,description:description,type:type$1,required:required$1,properties:properties$2,additionalProperties:additionalProperties$1},uri$1={},uri_all={exports:{}};
/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e,t){!function(e){function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var o=t.length-1,a=1;a<o;++a)t[a]=t[a].slice(1,-1);return t[o]=t[o].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function o(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function a(e){return e.toUpperCase()}function n(e){var o=t("[0-9]","[A-Fa-f]"),a=r(r("%[EFef]"+o+"%"+o+o+"%"+o+o)+"|"+r("%[89A-Fa-f]"+o+"%"+o+o)+"|"+r("%"+o+o)),n="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",s=t("[\\:\\/\\?\\#\\[\\]\\@]",n),i=e?"[\\uE000-\\uF8FF]":"[]",c=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");r("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),r(r(a+"|"+t(c,n,"[\\:]"))+"*");var l=r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?[0-9]"),d=r(l+"\\."+l+"\\."+l+"\\."+l),u=r(o+"{1,4}"),p=r(r(u+"\\:"+u)+"|"+d),f=r(r(u+"\\:")+"{6}"+p),h=r("\\:\\:"+r(u+"\\:")+"{5}"+p),m=r(r(u)+"?\\:\\:"+r(u+"\\:")+"{4}"+p),g=r(r(r(u+"\\:")+"{0,1}"+u)+"?\\:\\:"+r(u+"\\:")+"{3}"+p),y=r(r(r(u+"\\:")+"{0,2}"+u)+"?\\:\\:"+r(u+"\\:")+"{2}"+p),v=r(r(r(u+"\\:")+"{0,3}"+u)+"?\\:\\:"+u+"\\:"+p),_=r(r(r(u+"\\:")+"{0,4}"+u)+"?\\:\\:"+p),$=r(r(r(u+"\\:")+"{0,5}"+u)+"?\\:\\:"+u),b=r(r(r(u+"\\:")+"{0,6}"+u)+"?\\:\\:"),w=r([f,h,m,g,y,v,_,$,b].join("|")),S=r(r(c+"|"+a)+"+");r("[vV]"+o+"+\\."+t(c,n,"[\\:]")+"+"),r(r(a+"|"+t(c,n))+"*");var P=r(a+"|"+t(c,n,"[\\:\\@]"));return r(r(a+"|"+t(c,n,"[\\@]"))+"+"),r(r(P+"|"+t("[\\/\\?]",i))+"*"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",c,n),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",c,n),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",c,n),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",c,n),"g"),NOT_QUERY:new RegExp(t("[^\\%]",c,n,"[\\:\\@\\/\\?]",i),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",c,n,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",c,n),"g"),UNRESERVED:new RegExp(c,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",c,s),"g"),PCT_ENCODED:new RegExp(a,"g"),IPV4ADDRESS:new RegExp("^("+d+")$"),IPV6ADDRESS:new RegExp("^\\[?("+w+")"+r(r("\\%25|\\%(?!"+o+"{2})")+"("+S+")")+"?\\]?$")}}var s=n(!1),i=n(!0),c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],o=!0,a=!1,n=void 0;try{for(var s,i=e[Symbol.iterator]();!(o=(s=i.next()).done)&&(r.push(s.value),!t||r.length!==t);o=!0);}catch(e){a=!0,n=e}finally{try{!o&&i.return&&i.return()}finally{if(a)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=2147483647,d=/^xn--/,u=/[^\0-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,m=String.fromCharCode;function g(e){throw new RangeError(f[e])}function y(e,t){var r=e.split("@"),o="";r.length>1&&(o=r[0]+"@",e=r[1]);var a=function(e,t){for(var r=[],o=e.length;o--;)r[o]=t(e[o]);return r}((e=e.replace(p,".")).split("."),t).join(".");return o+a}function v(e){for(var t=[],r=0,o=e.length;r<o;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<o){var n=e.charCodeAt(r++);56320==(64512&n)?t.push(((1023&a)<<10)+(1023&n)+65536):(t.push(a),r--)}else t.push(a)}return t}var _=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},$=function(e,t,r){var o=0;for(e=r?h(e/700):e>>1,e+=h(e/t);e>455;o+=36)e=h(e/35);return h(o+36*e/(e+38))},b=function(e){var t,r=[],o=e.length,a=0,n=128,s=72,i=e.lastIndexOf("-");i<0&&(i=0);for(var c=0;c<i;++c)e.charCodeAt(c)>=128&&g("not-basic"),r.push(e.charCodeAt(c));for(var d=i>0?i+1:0;d<o;){for(var u=a,p=1,f=36;;f+=36){d>=o&&g("invalid-input");var m=(t=e.charCodeAt(d++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(m>=36||m>h((l-a)/p))&&g("overflow"),a+=m*p;var y=f<=s?1:f>=s+26?26:f-s;if(m<y)break;var v=36-y;p>h(l/v)&&g("overflow"),p*=v}var _=r.length+1;s=$(a-u,_,0==u),h(a/_)>l-n&&g("overflow"),n+=h(a/_),a%=_,r.splice(a++,0,n)}return String.fromCodePoint.apply(String,r)},w=function(e){var t=[],r=(e=v(e)).length,o=128,a=0,n=72,s=!0,i=!1,c=void 0;try{for(var d,u=e[Symbol.iterator]();!(s=(d=u.next()).done);s=!0){var p=d.value;p<128&&t.push(m(p))}}catch(e){i=!0,c=e}finally{try{!s&&u.return&&u.return()}finally{if(i)throw c}}var f=t.length,y=f;for(f&&t.push("-");y<r;){var b=l,w=!0,S=!1,P=void 0;try{for(var E,j=e[Symbol.iterator]();!(w=(E=j.next()).done);w=!0){var k=E.value;k>=o&&k<b&&(b=k)}}catch(e){S=!0,P=e}finally{try{!w&&j.return&&j.return()}finally{if(S)throw P}}var x=y+1;b-o>h((l-a)/x)&&g("overflow"),a+=(b-o)*x,o=b;var O=!0,C=!1,T=void 0;try{for(var N,A=e[Symbol.iterator]();!(O=(N=A.next()).done);O=!0){var R=N.value;if(R<o&&++a>l&&g("overflow"),R==o){for(var I=a,D=36;;D+=36){var M=D<=n?1:D>=n+26?26:D-n;if(I<M)break;var F=I-M,V=36-M;t.push(m(_(M+F%V,0))),I=h(F/V)}t.push(m(_(I,0))),n=$(a,x,y==f),a=0,++y}}}catch(e){C=!0,T=e}finally{try{!O&&A.return&&A.return()}finally{if(C)throw T}}++a,++o}return t.join("")},S=function(e){return y(e,(function(e){return u.test(e)?"xn--"+w(e):e}))},P=function(e){return y(e,(function(e){return d.test(e)?b(e.slice(4).toLowerCase()):e}))},E={};function j(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function k(e){for(var t="",r=0,o=e.length;r<o;){var a=parseInt(e.substr(r+1,2),16);if(a<128)t+=String.fromCharCode(a),r+=3;else if(a>=194&&a<224){if(o-r>=6){var n=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&a)<<6|63&n)}else t+=e.substr(r,6);r+=6}else if(a>=224){if(o-r>=9){var s=parseInt(e.substr(r+4,2),16),i=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&a)<<12|(63&s)<<6|63&i)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function x(e,t){function r(e){var r=k(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,j).replace(t.PCT_ENCODED,a)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,j).replace(t.PCT_ENCODED,a)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,j).replace(t.PCT_ENCODED,a)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,j).replace(t.PCT_ENCODED,a)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,j).replace(t.PCT_ENCODED,a)),e}function O(e){return e.replace(/^0*(.*)/,"$1")||"0"}function C(e,t){var r=e.match(t.IPV4ADDRESS)||[],o=c(r,2)[1];return o?o.split(".").map(O).join("."):e}function T(e,t){var r=e.match(t.IPV6ADDRESS)||[],o=c(r,3),a=o[1],n=o[2];if(a){for(var s=a.toLowerCase().split("::").reverse(),i=c(s,2),l=i[0],d=i[1],u=d?d.split(":").map(O):[],p=l.split(":").map(O),f=t.IPV4ADDRESS.test(p[p.length-1]),h=f?7:8,m=p.length-h,g=Array(h),y=0;y<h;++y)g[y]=u[y]||p[m+y]||"";f&&(g[h-1]=C(g[h-1],t));var v=g.reduce((function(e,t,r){if(!t||"0"===t){var o=e[e.length-1];o&&o.index+o.length===r?o.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],_=void 0;if(v&&v.length>1){var $=g.slice(0,v.index),b=g.slice(v.index+v.length);_=$.join(":")+"::"+b.join(":")}else _=g.join(":");return n&&(_+="%"+n),_}return e}var N=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,A=void 0==="".match(/(){0}/)[1];function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},o=!1!==t.iri?i:s;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var a=e.match(N);if(a){A?(r.scheme=a[1],r.userinfo=a[3],r.host=a[4],r.port=parseInt(a[5],10),r.path=a[6]||"",r.query=a[7],r.fragment=a[8],isNaN(r.port)&&(r.port=a[5])):(r.scheme=a[1]||void 0,r.userinfo=-1!==e.indexOf("@")?a[3]:void 0,r.host=-1!==e.indexOf("//")?a[4]:void 0,r.port=parseInt(a[5],10),r.path=a[6]||"",r.query=-1!==e.indexOf("?")?a[7]:void 0,r.fragment=-1!==e.indexOf("#")?a[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?a[4]:void 0)),r.host&&(r.host=T(C(r.host,o),o)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var n=E[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||n&&n.unicodeSupport)x(r,o);else{if(r.host&&(t.domainHost||n&&n.domainHost))try{r.host=S(r.host.replace(o.PCT_ENCODED,k).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}x(r,s)}n&&n.parse&&n.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function I(e,t){var r=!1!==t.iri?i:s,o=[];return void 0!==e.userinfo&&(o.push(e.userinfo),o.push("@")),void 0!==e.host&&o.push(T(C(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(o.push(":"),o.push(String(e.port))),o.length?o.join(""):void 0}var D=/^\.\.?\//,M=/^\/\.(\/|$)/,F=/^\/\.\.(\/|$)/,V=/^\/?(?:.|\n)*?(?=\/|$)/;function q(e){for(var t=[];e.length;)if(e.match(D))e=e.replace(D,"");else if(e.match(M))e=e.replace(M,"/");else if(e.match(F))e=e.replace(F,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(V);if(!r)throw new Error("Unexpected dot segment condition");var o=r[0];e=e.slice(o.length),t.push(o)}return t.join("")}function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?i:s,o=[],a=E[(t.scheme||e.scheme||"").toLowerCase()];if(a&&a.serialize&&a.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||a&&a.domainHost)try{e.host=t.iri?P(e.host):S(e.host.replace(r.PCT_ENCODED,k).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}x(e,r),"suffix"!==t.reference&&e.scheme&&(o.push(e.scheme),o.push(":"));var n=I(e,t);if(void 0!==n&&("suffix"!==t.reference&&o.push("//"),o.push(n),e.path&&"/"!==e.path.charAt(0)&&o.push("/")),void 0!==e.path){var c=e.path;t.absolutePath||a&&a.absolutePath||(c=q(c)),void 0===n&&(c=c.replace(/^\/\//,"/%2F")),o.push(c)}return void 0!==e.query&&(o.push("?"),o.push(e.query)),void 0!==e.fragment&&(o.push("#"),o.push(e.fragment)),o.join("")}function L(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments[3],a={};return o||(e=R(W(e,r),r),t=R(W(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(a.scheme=t.scheme,a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=q(t.path||""),a.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=q(t.path||""),a.query=t.query):(t.path?("/"===t.path.charAt(0)?a.path=q(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?a.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:a.path=t.path:a.path="/"+t.path,a.path=q(a.path)),a.query=t.query):(a.path=e.path,void 0!==t.query?a.query=t.query:a.query=e.query),a.userinfo=e.userinfo,a.host=e.host,a.port=e.port),a.scheme=e.scheme),a.fragment=t.fragment,a}function K(e,t){return e&&e.toString().replace(t&&t.iri?i.PCT_ENCODED:s.PCT_ENCODED,k)}var U={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},z={scheme:"https",domainHost:U.domainHost,parse:U.parse,serialize:U.serialize};function B(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var G={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=B(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(B(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),o=c(r,2),a=o[0],n=o[1];e.path=a&&"/"!==a?a:void 0,e.query=n,e.resourceName=void 0}return e.fragment=void 0,e}},H={scheme:"wss",domainHost:G.domainHost,parse:G.parse,serialize:G.serialize},J={},Y="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Z="[0-9A-Fa-f]",X=r(r("%[EFef]"+Z+"%"+Z+Z+"%"+Z+Z)+"|"+r("%[89A-Fa-f]"+Z+"%"+Z+Z)+"|"+r("%"+Z+Z)),Q=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),ee=new RegExp(Y,"g"),te=new RegExp(X,"g"),re=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',Q),"g"),oe=new RegExp(t("[^]",Y,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),ae=oe;function ne(e){var t=k(e);return t.match(ee)?t:e}var se={scheme:"mailto",parse:function(e,t){var r=e,o=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var a=!1,n={},s=r.query.split("&"),i=0,c=s.length;i<c;++i){var l=s[i].split("=");switch(l[0]){case"to":for(var d=l[1].split(","),u=0,p=d.length;u<p;++u)o.push(d[u]);break;case"subject":r.subject=K(l[1],t);break;case"body":r.body=K(l[1],t);break;default:a=!0,n[K(l[0],t)]=K(l[1],t)}}a&&(r.headers=n)}r.query=void 0;for(var f=0,h=o.length;f<h;++f){var m=o[f].split("@");if(m[0]=K(m[0]),t.unicodeSupport)m[1]=K(m[1],t).toLowerCase();else try{m[1]=S(K(m[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}o[f]=m.join("@")}return r},serialize:function(e,t){var r,o=e,n=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(n){for(var s=0,i=n.length;s<i;++s){var c=String(n[s]),l=c.lastIndexOf("@"),d=c.slice(0,l).replace(te,ne).replace(te,a).replace(re,j),u=c.slice(l+1);try{u=t.iri?P(u):S(K(u,t).toLowerCase())}catch(e){o.error=o.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}n[s]=d+"@"+u}o.path=n.join(",")}var p=e.headers=e.headers||{};e.subject&&(p.subject=e.subject),e.body&&(p.body=e.body);var f=[];for(var h in p)p[h]!==J[h]&&f.push(h.replace(te,ne).replace(te,a).replace(oe,j)+"="+p[h].replace(te,ne).replace(te,a).replace(ae,j));return f.length&&(o.query=f.join("&")),o}},ie=/^([^\:]+)\:(.*)/,ce={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(ie),o=e;if(r){var a=t.scheme||o.scheme||"urn",n=r[1].toLowerCase(),s=r[2],i=a+":"+(t.nid||n),c=E[i];o.nid=n,o.nss=s,o.path=void 0,c&&(o=c.parse(o,t))}else o.error=o.error||"URN can not be parsed.";return o},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",o=e.nid,a=r+":"+(t.nid||o),n=E[a];n&&(e=n.serialize(e,t));var s=e,i=e.nss;return s.path=(o||t.nid)+":"+i,s}},le=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,de={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(le)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};E[U.scheme]=U,E[z.scheme]=z,E[G.scheme]=G,E[H.scheme]=H,E[se.scheme]=se,E[ce.scheme]=ce,E[de.scheme]=de,e.SCHEMES=E,e.pctEncChar=j,e.pctDecChars=k,e.parse=R,e.removeDotSegments=q,e.serialize=W,e.resolveComponents=L,e.resolve=function(e,t,r){var o=function(e,t){var r=e;if(t)for(var o in t)r[o]=t[o];return r}({scheme:"null"},r);return W(L(R(e,o),R(t,o),o,!0),o)},e.normalize=function(e,t){return"string"==typeof e?e=W(R(e,t),t):"object"===o(e)&&(e=R(W(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=W(R(e,r),r):"object"===o(e)&&(e=W(e,r)),"string"==typeof t?t=W(R(t,r),r):"object"===o(t)&&(t=W(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?i.ESCAPE:s.ESCAPE,j)},e.unescapeComponent=K,Object.defineProperty(e,"__esModule",{value:!0})}(t)}(0,uri_all.exports),Object.defineProperty(uri$1,"__esModule",{value:!0});const uri=uri_all.exports;uri.code='require("ajv/dist/runtime/uri").default',uri$1.default=uri,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=validate$1;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=codegen;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const o=validation_error,a=ref_error,n=rules,s=compile,i=codegen,c=resolve$1,l=dataType,d=util,u=require$$9,p=uri$1,f=(e,t)=>new RegExp(e,t);f.code="new RegExp";const h=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function v(e){var t,r,o,a,n,s,i,c,l,d,u,h,m,g,y,v,_,$,b,w,S,P,E,j,k;const x=e.strict,O=null===(t=e.code)||void 0===t?void 0:t.optimize,C=!0===O||void 0===O?1:O||0,T=null!==(o=null===(r=e.code)||void 0===r?void 0:r.regExp)&&void 0!==o?o:f,N=null!==(a=e.uriResolver)&&void 0!==a?a:p.default;return{strictSchema:null===(s=null!==(n=e.strictSchema)&&void 0!==n?n:x)||void 0===s||s,strictNumbers:null===(c=null!==(i=e.strictNumbers)&&void 0!==i?i:x)||void 0===c||c,strictTypes:null!==(d=null!==(l=e.strictTypes)&&void 0!==l?l:x)&&void 0!==d?d:"log",strictTuples:null!==(h=null!==(u=e.strictTuples)&&void 0!==u?u:x)&&void 0!==h?h:"log",strictRequired:null!==(g=null!==(m=e.strictRequired)&&void 0!==m?m:x)&&void 0!==g&&g,code:e.code?{...e.code,optimize:C,regExp:T}:{optimize:C,regExp:T},loopRequired:null!==(y=e.loopRequired)&&void 0!==y?y:200,loopEnum:null!==(v=e.loopEnum)&&void 0!==v?v:200,meta:null===(_=e.meta)||void 0===_||_,messages:null===($=e.messages)||void 0===$||$,inlineRefs:null===(b=e.inlineRefs)||void 0===b||b,schemaId:null!==(w=e.schemaId)&&void 0!==w?w:"$id",addUsedSchema:null===(S=e.addUsedSchema)||void 0===S||S,validateSchema:null===(P=e.validateSchema)||void 0===P||P,validateFormats:null===(E=e.validateFormats)||void 0===E||E,unicodeRegExp:null===(j=e.unicodeRegExp)||void 0===j||j,int32range:null===(k=e.int32range)||void 0===k||k,uriResolver:N}}class _{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...v(e)};const{es5:t,lines:r}=this.opts.code;this.scope=new i.ValueScope({scope:{},prefixes:m,es5:t,lines:r}),this.logger=function(e){if(!1===e)return j;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const o=e.validateFormats;e.validateFormats=!1,this.RULES=(0,n.getRules)(),$.call(this,g,e,"NOT SUPPORTED"),$.call(this,y,e,"DEPRECATED","warn"),this._metaOpts=E.call(this),e.formats&&S.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&P.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),w.call(this),e.validateFormats=o}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:r}=this.opts;let o=u;"id"===r&&(o={...u},o.id=o.$id,delete o.$id),t&&e&&this.addMetaSchema(o,o[r],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let r;if("string"==typeof e){if(r=this.getSchema(e),!r)throw new Error(`no schema with key or ref "${e}"`)}else r=this.compile(e);const o=r(t);return"$async"in r||(this.errors=r.errors),o}compile(e,t){const r=this._addSchema(e,t);return r.validate||this._compileSchemaEnv(r)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:r}=this.opts;return o.call(this,e,t);async function o(e,t){await n.call(this,e.$schema);const r=this._addSchema(e,t);return r.validate||s.call(this,r)}async function n(e){e&&!this.getSchema(e)&&await o.call(this,{$ref:e},!0)}async function s(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof a.default))throw t;return i.call(this,t),await c.call(this,t.missingSchema),s.call(this,e)}}function i({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function c(e){const r=await l.call(this,e);this.refs[e]||await n.call(this,r.$schema),this.refs[e]||this.addSchema(r,e,t)}async function l(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=r(e))}finally{delete this._loading[e]}}}addSchema(e,t,r,o=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,r,o);return this}let a;if("object"==typeof e){const{schemaId:t}=this.opts;if(a=e[t],void 0!==a&&"string"!=typeof a)throw new Error(`schema ${t} must be string`)}return t=(0,c.normalizeId)(t||a),this._checkUnique(t),this.schemas[t]=this._addSchema(e,r,t,o,!0),this}addMetaSchema(e,t,r=this.opts.validateSchema){return this.addSchema(e,t,!0,r),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let r;if(r=e.$schema,void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(r=r||this.opts.defaultMeta||this.defaultMeta(),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const o=this.validate(r,e);if(!o&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return o}getSchema(e){let t;for(;"string"==typeof(t=b.call(this,e));)e=t;if(void 0===t){const{schemaId:r}=this.opts,o=new s.SchemaEnv({schema:{},schemaId:r});if(t=s.resolveSchema.call(this,o,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=b.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let r=e[this.opts.schemaId];return r&&(r=(0,c.normalizeId)(r),delete this.schemas[r],delete this.refs[r]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let r;if("string"==typeof e)r=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=r);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(r=(t=e).keyword,Array.isArray(r)&&!r.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(x.call(this,r,t),!t)return(0,d.eachItem)(r,e=>O.call(this,e)),this;T.call(this,t);const o={...t,type:(0,l.getJSONTypes)(t.type),schemaType:(0,l.getJSONTypes)(t.schemaType)};return(0,d.eachItem)(r,0===o.type.length?e=>O.call(this,e,o):e=>o.type.forEach(t=>O.call(this,e,o,t))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const r of t.rules){const t=r.rules.findIndex(t=>t.keyword===e);t>=0&&r.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:r="data"}={}){return e&&0!==e.length?e.map(e=>`${r}${e.instancePath} ${e.message}`).reduce((e,r)=>e+t+r):"No errors"}$dataMetaSchema(e,t){const r=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const o of t){const t=o.split("/").slice(1);let a=e;for(const e of t)a=a[e];for(const e in r){const t=r[e];if("object"!=typeof t)continue;const{$data:o}=t.definition,n=a[e];o&&n&&(a[e]=A(n))}}return e}_removeAllSchemas(e,t){for(const r in e){const o=e[r];t&&!t.test(r)||("string"==typeof o?delete e[r]:o&&!o.meta&&(this._cache.delete(o.schema),delete e[r]))}}_addSchema(e,t,r,o=this.opts.validateSchema,a=this.opts.addUsedSchema){let n;const{schemaId:i}=this.opts;if("object"==typeof e)n=e[i];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let l=this._cache.get(e);if(void 0!==l)return l;r=(0,c.normalizeId)(n||r);const d=c.getSchemaRefs.call(this,e,r);return l=new s.SchemaEnv({schema:e,schemaId:i,meta:t,baseId:r,localRefs:d}),this._cache.set(l.schema,l),a&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=l),o&&this.validateSchema(e,!0),l}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):s.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{s.compileSchema.call(this,e)}finally{this.opts=t}}}function $(e,t,r,o="error"){for(const a in e){const n=a;n in t&&this.logger[o](`${r}: option ${a}. ${e[n]}`)}}function b(e){return e=(0,c.normalizeId)(e),this.schemas[e]||this.refs[e]}function w(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function S(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function P(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}}function E(){const e={...this.opts};for(const t of h)delete e[t];return e}e.default=_,_.ValidationError=o.default,_.MissingRefError=a.default;const j={log(){},warn(){},error(){}},k=/^[a-z_$][a-z0-9_$:-]*$/i;function x(e,t){const{RULES:r}=this;if((0,d.eachItem)(e,e=>{if(r.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!k.test(e))throw new Error(`Keyword ${e} has invalid name`)}),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function O(e,t,r){var o;const a=null==t?void 0:t.post;if(r&&a)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:n}=this;let s=a?n.post:n.rules.find(({type:e})=>e===r);if(s||(s={type:r,rules:[]},n.rules.push(s)),n.keywords[e]=!0,!t)return;const i={keyword:e,definition:{...t,type:(0,l.getJSONTypes)(t.type),schemaType:(0,l.getJSONTypes)(t.schemaType)}};t.before?C.call(this,s,i,t.before):s.rules.push(i),n.all[e]=i,null===(o=t.implements)||void 0===o||o.forEach(e=>this.addKeyword(e))}function C(e,t,r){const o=e.rules.findIndex(e=>e.keyword===r);o>=0?e.rules.splice(o,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function T(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=A(t)),e.validateSchema=this.compile(t,!0))}const N={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function A(e){return{anyOf:[e,N]}}}(core$2);var draft7={},core$1={},id={};Object.defineProperty(id,"__esModule",{value:!0});const def$s={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};id.default=def$s;var ref={};Object.defineProperty(ref,"__esModule",{value:!0}),ref.callRef=ref.getValidate=void 0;const ref_error_1=ref_error,code_1$8=code,codegen_1$l=codegen,names_1$1=names$1,compile_1$1=compile,util_1$j=util,def$r={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:o}=e,{baseId:a,schemaEnv:n,validateName:s,opts:i,self:c}=o,{root:l}=n;if(("#"===r||"#/"===r)&&a===l.baseId)return function(){if(n===l)return callRef(e,s,n,n.$async);const r=t.scopeValue("root",{ref:l});return callRef(e,codegen_1$l._`${r}.validate`,l,l.$async)}();const d=compile_1$1.resolveRef.call(c,l,a,r);if(void 0===d)throw new ref_error_1.default(o.opts.uriResolver,a,r);return d instanceof compile_1$1.SchemaEnv?function(t){const r=getValidate(e,t);callRef(e,r,t,t.$async)}(d):function(o){const a=t.scopeValue("schema",!0===i.code.source?{ref:o,code:(0,codegen_1$l.stringify)(o)}:{ref:o}),n=t.name("valid"),s=e.subschema({schema:o,dataTypes:[],schemaPath:codegen_1$l.nil,topSchemaRef:a,errSchemaPath:r},n);e.mergeEvaluated(s),e.ok(n)}(d)}};function getValidate(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):codegen_1$l._`${r.scopeValue("wrapper",{ref:t})}.validate`}function callRef(e,t,r,o){const{gen:a,it:n}=e,{allErrors:s,schemaEnv:i,opts:c}=n,l=c.passContext?names_1$1.default.this:codegen_1$l.nil;function d(e){const t=codegen_1$l._`${e}.errors`;a.assign(names_1$1.default.vErrors,codegen_1$l._`${names_1$1.default.vErrors} === null ? ${t} : ${names_1$1.default.vErrors}.concat(${t})`),a.assign(names_1$1.default.errors,codegen_1$l._`${names_1$1.default.vErrors}.length`)}function u(e){var t;if(!n.opts.unevaluated)return;const o=null===(t=null==r?void 0:r.validate)||void 0===t?void 0:t.evaluated;if(!0!==n.props)if(o&&!o.dynamicProps)void 0!==o.props&&(n.props=util_1$j.mergeEvaluated.props(a,o.props,n.props));else{const t=a.var("props",codegen_1$l._`${e}.evaluated.props`);n.props=util_1$j.mergeEvaluated.props(a,t,n.props,codegen_1$l.Name)}if(!0!==n.items)if(o&&!o.dynamicItems)void 0!==o.items&&(n.items=util_1$j.mergeEvaluated.items(a,o.items,n.items));else{const t=a.var("items",codegen_1$l._`${e}.evaluated.items`);n.items=util_1$j.mergeEvaluated.items(a,t,n.items,codegen_1$l.Name)}}o?function(){if(!i.$async)throw new Error("async schema referenced by sync schema");const r=a.let("valid");a.try(()=>{a.code(codegen_1$l._`await ${(0,code_1$8.callValidateCode)(e,t,l)}`),u(t),s||a.assign(r,!0)},e=>{a.if(codegen_1$l._`!(${e} instanceof ${n.ValidationError})`,()=>a.throw(e)),d(e),s||a.assign(r,!1)}),e.ok(r)}():e.result((0,code_1$8.callValidateCode)(e,t,l),()=>u(t),()=>d(t))}ref.getValidate=getValidate,ref.callRef=callRef,ref.default=def$r,Object.defineProperty(core$1,"__esModule",{value:!0});const id_1=id,ref_1=ref,core=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",id_1.default,ref_1.default];core$1.default=core;var validation$1={},limitNumber={};Object.defineProperty(limitNumber,"__esModule",{value:!0});const codegen_1$k=codegen,ops=codegen_1$k.operators,KWDs={maximum:{okStr:"<=",ok:ops.LTE,fail:ops.GT},minimum:{okStr:">=",ok:ops.GTE,fail:ops.LT},exclusiveMaximum:{okStr:"<",ok:ops.LT,fail:ops.GTE},exclusiveMinimum:{okStr:">",ok:ops.GT,fail:ops.LTE}},error$i={message:({keyword:e,schemaCode:t})=>codegen_1$k.str`must be ${KWDs[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>codegen_1$k._`{comparison: ${KWDs[e].okStr}, limit: ${t}}`},def$q={keyword:Object.keys(KWDs),type:"number",schemaType:"number",$data:!0,error:error$i,code(e){const{keyword:t,data:r,schemaCode:o}=e;e.fail$data(codegen_1$k._`${r} ${KWDs[t].fail} ${o} || isNaN(${r})`)}};limitNumber.default=def$q;var multipleOf={};Object.defineProperty(multipleOf,"__esModule",{value:!0});const codegen_1$j=codegen,error$h={message:({schemaCode:e})=>codegen_1$j.str`must be multiple of ${e}`,params:({schemaCode:e})=>codegen_1$j._`{multipleOf: ${e}}`},def$p={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:error$h,code(e){const{gen:t,data:r,schemaCode:o,it:a}=e,n=a.opts.multipleOfPrecision,s=t.let("res"),i=n?codegen_1$j._`Math.abs(Math.round(${s}) - ${s}) > 1e-${n}`:codegen_1$j._`${s} !== parseInt(${s})`;e.fail$data(codegen_1$j._`(${o} === 0 || (${s} = ${r}/${o}, ${i}))`)}};multipleOf.default=def$p;var limitLength={},ucs2length$1={};function ucs2length(e){const t=e.length;let r,o=0,a=0;for(;a<t;)o++,r=e.charCodeAt(a++),r>=55296&&r<=56319&&a<t&&(r=e.charCodeAt(a),56320==(64512&r)&&a++);return o}Object.defineProperty(ucs2length$1,"__esModule",{value:!0}),ucs2length$1.default=ucs2length,ucs2length.code='require("ajv/dist/runtime/ucs2length").default',Object.defineProperty(limitLength,"__esModule",{value:!0});const codegen_1$i=codegen,util_1$i=util,ucs2length_1=ucs2length$1,error$g={message({keyword:e,schemaCode:t}){const r="maxLength"===e?"more":"fewer";return codegen_1$i.str`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>codegen_1$i._`{limit: ${e}}`},def$o={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:error$g,code(e){const{keyword:t,data:r,schemaCode:o,it:a}=e,n="maxLength"===t?codegen_1$i.operators.GT:codegen_1$i.operators.LT,s=!1===a.opts.unicode?codegen_1$i._`${r}.length`:codegen_1$i._`${(0,util_1$i.useFunc)(e.gen,ucs2length_1.default)}(${r})`;e.fail$data(codegen_1$i._`${s} ${n} ${o}`)}};limitLength.default=def$o;var pattern={};Object.defineProperty(pattern,"__esModule",{value:!0});const code_1$7=code,codegen_1$h=codegen,error$f={message:({schemaCode:e})=>codegen_1$h.str`must match pattern "${e}"`,params:({schemaCode:e})=>codegen_1$h._`{pattern: ${e}}`},def$n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:error$f,code(e){const{data:t,$data:r,schema:o,schemaCode:a,it:n}=e,s=n.opts.unicodeRegExp?"u":"",i=r?codegen_1$h._`(new RegExp(${a}, ${s}))`:(0,code_1$7.usePattern)(e,o);e.fail$data(codegen_1$h._`!${i}.test(${t})`)}};pattern.default=def$n;var limitProperties={};Object.defineProperty(limitProperties,"__esModule",{value:!0});const codegen_1$g=codegen,error$e={message({keyword:e,schemaCode:t}){const r="maxProperties"===e?"more":"fewer";return codegen_1$g.str`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>codegen_1$g._`{limit: ${e}}`},def$m={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:error$e,code(e){const{keyword:t,data:r,schemaCode:o}=e,a="maxProperties"===t?codegen_1$g.operators.GT:codegen_1$g.operators.LT;e.fail$data(codegen_1$g._`Object.keys(${r}).length ${a} ${o}`)}};limitProperties.default=def$m;var required={};Object.defineProperty(required,"__esModule",{value:!0});const code_1$6=code,codegen_1$f=codegen,util_1$h=util,error$d={message:({params:{missingProperty:e}})=>codegen_1$f.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>codegen_1$f._`{missingProperty: ${e}}`},def$l={keyword:"required",type:"object",schemaType:"array",$data:!0,error:error$d,code(e){const{gen:t,schema:r,schemaCode:o,data:a,$data:n,it:s}=e,{opts:i}=s;if(!n&&0===r.length)return;const c=r.length>=i.loopRequired;if(s.allErrors?function(){if(c||n)e.block$data(codegen_1$f.nil,l);else for(const t of r)(0,code_1$6.checkReportMissingProp)(e,t)}():function(){const s=t.let("missing");if(c||n){const r=t.let("valid",!0);e.block$data(r,()=>function(r,n){e.setParams({missingProperty:r}),t.forOf(r,o,()=>{t.assign(n,(0,code_1$6.propertyInData)(t,a,r,i.ownProperties)),t.if((0,codegen_1$f.not)(n),()=>{e.error(),t.break()})},codegen_1$f.nil)}(s,r)),e.ok(r)}else t.if((0,code_1$6.checkMissingProp)(e,r,s)),(0,code_1$6.reportMissingProp)(e,s),t.else()}(),i.strictRequired){const t=e.parentSchema.properties,{definedProperties:o}=e.it;for(const e of r)if(void 0===(null==t?void 0:t[e])&&!o.has(e)){const t=`required property "${e}" is not defined at "${s.schemaEnv.baseId+s.errSchemaPath}" (strictRequired)`;(0,util_1$h.checkStrictMode)(s,t,s.opts.strictRequired)}}function l(){t.forOf("prop",o,r=>{e.setParams({missingProperty:r}),t.if((0,code_1$6.noPropertyInData)(t,a,r,i.ownProperties),()=>e.error())})}}};required.default=def$l;var limitItems={};Object.defineProperty(limitItems,"__esModule",{value:!0});const codegen_1$e=codegen,error$c={message({keyword:e,schemaCode:t}){const r="maxItems"===e?"more":"fewer";return codegen_1$e.str`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>codegen_1$e._`{limit: ${e}}`},def$k={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:error$c,code(e){const{keyword:t,data:r,schemaCode:o}=e,a="maxItems"===t?codegen_1$e.operators.GT:codegen_1$e.operators.LT;e.fail$data(codegen_1$e._`${r}.length ${a} ${o}`)}};limitItems.default=def$k;var uniqueItems={},equal$1={};Object.defineProperty(equal$1,"__esModule",{value:!0});const equal=fastDeepEqual;equal.code='require("ajv/dist/runtime/equal").default',equal$1.default=equal,Object.defineProperty(uniqueItems,"__esModule",{value:!0});const dataType_1=dataType,codegen_1$d=codegen,util_1$g=util,equal_1$2=equal$1,error$b={message:({params:{i:e,j:t}})=>codegen_1$d.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>codegen_1$d._`{i: ${e}, j: ${t}}`},def$j={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:error$b,code(e){const{gen:t,data:r,$data:o,schema:a,parentSchema:n,schemaCode:s,it:i}=e;if(!o&&!a)return;const c=t.let("valid"),l=n.items?(0,dataType_1.getSchemaTypes)(n.items):[];function d(o,a){const n=t.name("item"),s=(0,dataType_1.checkDataTypes)(l,n,i.opts.strictNumbers,dataType_1.DataType.Wrong),d=t.const("indices",codegen_1$d._`{}`);t.for(codegen_1$d._`;${o}--;`,()=>{t.let(n,codegen_1$d._`${r}[${o}]`),t.if(s,codegen_1$d._`continue`),l.length>1&&t.if(codegen_1$d._`typeof ${n} == "string"`,codegen_1$d._`${n} += "_"`),t.if(codegen_1$d._`typeof ${d}[${n}] == "number"`,()=>{t.assign(a,codegen_1$d._`${d}[${n}]`),e.error(),t.assign(c,!1).break()}).code(codegen_1$d._`${d}[${n}] = ${o}`)})}function u(o,a){const n=(0,util_1$g.useFunc)(t,equal_1$2.default),s=t.name("outer");t.label(s).for(codegen_1$d._`;${o}--;`,()=>t.for(codegen_1$d._`${a} = ${o}; ${a}--;`,()=>t.if(codegen_1$d._`${n}(${r}[${o}], ${r}[${a}])`,()=>{e.error(),t.assign(c,!1).break(s)})))}e.block$data(c,(function(){const o=t.let("i",codegen_1$d._`${r}.length`),a=t.let("j");e.setParams({i:o,j:a}),t.assign(c,!0),t.if(codegen_1$d._`${o} > 1`,()=>(l.length>0&&!l.some(e=>"object"===e||"array"===e)?d:u)(o,a))}),codegen_1$d._`${s} === false`),e.ok(c)}};uniqueItems.default=def$j;var _const={};Object.defineProperty(_const,"__esModule",{value:!0});const codegen_1$c=codegen,util_1$f=util,equal_1$1=equal$1,error$a={message:"must be equal to constant",params:({schemaCode:e})=>codegen_1$c._`{allowedValue: ${e}}`},def$i={keyword:"const",$data:!0,error:error$a,code(e){const{gen:t,data:r,$data:o,schemaCode:a,schema:n}=e;o||n&&"object"==typeof n?e.fail$data(codegen_1$c._`!${(0,util_1$f.useFunc)(t,equal_1$1.default)}(${r}, ${a})`):e.fail(codegen_1$c._`${n} !== ${r}`)}};_const.default=def$i;var _enum={};Object.defineProperty(_enum,"__esModule",{value:!0});const codegen_1$b=codegen,util_1$e=util,equal_1=equal$1,error$9={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>codegen_1$b._`{allowedValues: ${e}}`},def$h={keyword:"enum",schemaType:"array",$data:!0,error:error$9,code(e){const{gen:t,data:r,$data:o,schema:a,schemaCode:n,it:s}=e;if(!o&&0===a.length)throw new Error("enum must have non-empty array");const i=a.length>=s.opts.loopEnum;let c;const l=()=>null!=c?c:c=(0,util_1$e.useFunc)(t,equal_1.default);let d;if(i||o)d=t.let("valid"),e.block$data(d,(function(){t.assign(d,!1),t.forOf("v",n,e=>t.if(codegen_1$b._`${l()}(${r}, ${e})`,()=>t.assign(d,!0).break()))}));else{if(!Array.isArray(a))throw new Error("ajv implementation error");const e=t.const("vSchema",n);d=(0,codegen_1$b.or)(...a.map((t,o)=>function(e,t){const o=a[t];return"object"==typeof o&&null!==o?codegen_1$b._`${l()}(${r}, ${e}[${t}])`:codegen_1$b._`${r} === ${o}`}(e,o)))}e.pass(d)}};_enum.default=def$h,Object.defineProperty(validation$1,"__esModule",{value:!0});const limitNumber_1=limitNumber,multipleOf_1=multipleOf,limitLength_1=limitLength,pattern_1=pattern,limitProperties_1=limitProperties,required_1=required,limitItems_1=limitItems,uniqueItems_1=uniqueItems,const_1=_const,enum_1=_enum,validation=[limitNumber_1.default,multipleOf_1.default,limitLength_1.default,pattern_1.default,limitProperties_1.default,required_1.default,limitItems_1.default,uniqueItems_1.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},const_1.default,enum_1.default];validation$1.default=validation;var applicator={},additionalItems={};Object.defineProperty(additionalItems,"__esModule",{value:!0}),additionalItems.validateAdditionalItems=void 0;const codegen_1$a=codegen,util_1$d=util,error$8={message:({params:{len:e}})=>codegen_1$a.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>codegen_1$a._`{limit: ${e}}`},def$g={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:error$8,code(e){const{parentSchema:t,it:r}=e,{items:o}=t;Array.isArray(o)?validateAdditionalItems(e,o):(0,util_1$d.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas')}};function validateAdditionalItems(e,t){const{gen:r,schema:o,data:a,keyword:n,it:s}=e;s.items=!0;const i=r.const("len",codegen_1$a._`${a}.length`);if(!1===o)e.setParams({len:t.length}),e.pass(codegen_1$a._`${i} <= ${t.length}`);else if("object"==typeof o&&!(0,util_1$d.alwaysValidSchema)(s,o)){const o=r.var("valid",codegen_1$a._`${i} <= ${t.length}`);r.if((0,codegen_1$a.not)(o),()=>function(o){r.forRange("i",t.length,i,t=>{e.subschema({keyword:n,dataProp:t,dataPropType:util_1$d.Type.Num},o),s.allErrors||r.if((0,codegen_1$a.not)(o),()=>r.break())})}(o)),e.ok(o)}}additionalItems.validateAdditionalItems=validateAdditionalItems,additionalItems.default=def$g;var prefixItems={},items={};Object.defineProperty(items,"__esModule",{value:!0}),items.validateTuple=void 0;const codegen_1$9=codegen,util_1$c=util,code_1$5=code,def$f={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return validateTuple(e,"additionalItems",t);r.items=!0,(0,util_1$c.alwaysValidSchema)(r,t)||e.ok((0,code_1$5.validateArray)(e))}};function validateTuple(e,t,r=e.schema){const{gen:o,parentSchema:a,data:n,keyword:s,it:i}=e;!function(e){const{opts:o,errSchemaPath:a}=i,n=r.length,c=n===e.minItems&&(n===e.maxItems||!1===e[t]);if(o.strictTuples&&!c){const e=`"${s}" is ${n}-tuple, but minItems or maxItems/${t} are not specified or different at path "${a}"`;(0,util_1$c.checkStrictMode)(i,e,o.strictTuples)}}(a),i.opts.unevaluated&&r.length&&!0!==i.items&&(i.items=util_1$c.mergeEvaluated.items(o,r.length,i.items));const c=o.name("valid"),l=o.const("len",codegen_1$9._`${n}.length`);r.forEach((t,r)=>{(0,util_1$c.alwaysValidSchema)(i,t)||(o.if(codegen_1$9._`${l} > ${r}`,()=>e.subschema({keyword:s,schemaProp:r,dataProp:r},c)),e.ok(c))})}items.validateTuple=validateTuple,items.default=def$f,Object.defineProperty(prefixItems,"__esModule",{value:!0});const items_1$1=items,def$e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,items_1$1.validateTuple)(e,"items")};prefixItems.default=def$e;var items2020={};Object.defineProperty(items2020,"__esModule",{value:!0});const codegen_1$8=codegen,util_1$b=util,code_1$4=code,additionalItems_1$1=additionalItems,error$7={message:({params:{len:e}})=>codegen_1$8.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>codegen_1$8._`{limit: ${e}}`},def$d={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:error$7,code(e){const{schema:t,parentSchema:r,it:o}=e,{prefixItems:a}=r;o.items=!0,(0,util_1$b.alwaysValidSchema)(o,t)||(a?(0,additionalItems_1$1.validateAdditionalItems)(e,a):e.ok((0,code_1$4.validateArray)(e)))}};items2020.default=def$d;var contains={};Object.defineProperty(contains,"__esModule",{value:!0});const codegen_1$7=codegen,util_1$a=util,error$6={message:({params:{min:e,max:t}})=>void 0===t?codegen_1$7.str`must contain at least ${e} valid item(s)`:codegen_1$7.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?codegen_1$7._`{minContains: ${e}}`:codegen_1$7._`{minContains: ${e}, maxContains: ${t}}`},def$c={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:error$6,code(e){const{gen:t,schema:r,parentSchema:o,data:a,it:n}=e;let s,i;const{minContains:c,maxContains:l}=o;n.opts.next?(s=void 0===c?1:c,i=l):s=1;const d=t.const("len",codegen_1$7._`${a}.length`);if(e.setParams({min:s,max:i}),void 0===i&&0===s)return void(0,util_1$a.checkStrictMode)(n,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==i&&s>i)return(0,util_1$a.checkStrictMode)(n,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,util_1$a.alwaysValidSchema)(n,r)){let t=codegen_1$7._`${d} >= ${s}`;return void 0!==i&&(t=codegen_1$7._`${t} && ${d} <= ${i}`),void e.pass(t)}n.items=!0;const u=t.name("valid");function p(){const e=t.name("_valid"),r=t.let("count",0);f(e,()=>t.if(e,()=>function(e){t.code(codegen_1$7._`${e}++`),void 0===i?t.if(codegen_1$7._`${e} >= ${s}`,()=>t.assign(u,!0).break()):(t.if(codegen_1$7._`${e} > ${i}`,()=>t.assign(u,!1).break()),1===s?t.assign(u,!0):t.if(codegen_1$7._`${e} >= ${s}`,()=>t.assign(u,!0)))}(r)))}function f(r,o){t.forRange("i",0,d,t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:util_1$a.Type.Num,compositeRule:!0},r),o()})}void 0===i&&1===s?f(u,()=>t.if(u,()=>t.break())):0===s?(t.let(u,!0),void 0!==i&&t.if(codegen_1$7._`${a}.length > 0`,p)):(t.let(u,!1),p()),e.result(u,()=>e.reset())}};contains.default=def$c;var dependencies={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=codegen,r=util,o=code;e.error={message:({params:{property:e,depsCount:r,deps:o}})=>{const a=1===r?"property":"properties";return t.str`must have ${a} ${o} when property ${e} is present`},params:({params:{property:e,depsCount:r,deps:o,missingProperty:a}})=>t._`{property: ${e},
    missingProperty: ${a},
    depsCount: ${r},
    deps: ${o}}`};const a={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(e){const[t,r]=function({schema:e}){const t={},r={};for(const o in e)"__proto__"!==o&&((Array.isArray(e[o])?t:r)[o]=e[o]);return[t,r]}(e);n(e,t),s(e,r)}};function n(e,r=e.schema){const{gen:a,data:n,it:s}=e;if(0===Object.keys(r).length)return;const i=a.let("missing");for(const c in r){const l=r[c];if(0===l.length)continue;const d=(0,o.propertyInData)(a,n,c,s.opts.ownProperties);e.setParams({property:c,depsCount:l.length,deps:l.join(", ")}),s.allErrors?a.if(d,()=>{for(const t of l)(0,o.checkReportMissingProp)(e,t)}):(a.if(t._`${d} && (${(0,o.checkMissingProp)(e,l,i)})`),(0,o.reportMissingProp)(e,i),a.else())}}function s(e,t=e.schema){const{gen:a,data:n,keyword:s,it:i}=e,c=a.name("valid");for(const l in t)(0,r.alwaysValidSchema)(i,t[l])||(a.if((0,o.propertyInData)(a,n,l,i.opts.ownProperties),()=>{const t=e.subschema({keyword:s,schemaProp:l},c);e.mergeValidEvaluated(t,c)},()=>a.var(c,!0)),e.ok(c))}e.validatePropertyDeps=n,e.validateSchemaDeps=s,e.default=a}(dependencies);var propertyNames={};Object.defineProperty(propertyNames,"__esModule",{value:!0});const codegen_1$6=codegen,util_1$9=util,error$5={message:"property name must be valid",params:({params:e})=>codegen_1$6._`{propertyName: ${e.propertyName}}`},def$b={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:error$5,code(e){const{gen:t,schema:r,data:o,it:a}=e;if((0,util_1$9.alwaysValidSchema)(a,r))return;const n=t.name("valid");t.forIn("key",o,r=>{e.setParams({propertyName:r}),e.subschema({keyword:"propertyNames",data:r,dataTypes:["string"],propertyName:r,compositeRule:!0},n),t.if((0,codegen_1$6.not)(n),()=>{e.error(!0),a.allErrors||t.break()})}),e.ok(n)}};propertyNames.default=def$b;var additionalProperties={};Object.defineProperty(additionalProperties,"__esModule",{value:!0});const code_1$3=code,codegen_1$5=codegen,names_1=names$1,util_1$8=util,error$4={message:"must NOT have additional properties",params:({params:e})=>codegen_1$5._`{additionalProperty: ${e.additionalProperty}}`},def$a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:error$4,code(e){const{gen:t,schema:r,parentSchema:o,data:a,errsCount:n,it:s}=e;if(!n)throw new Error("ajv implementation error");const{allErrors:i,opts:c}=s;if(s.props=!0,"all"!==c.removeAdditional&&(0,util_1$8.alwaysValidSchema)(s,r))return;const l=(0,code_1$3.allSchemaProperties)(o.properties),d=(0,code_1$3.allSchemaProperties)(o.patternProperties);function u(e){t.code(codegen_1$5._`delete ${a}[${e}]`)}function p(o){if("all"===c.removeAdditional||c.removeAdditional&&!1===r)u(o);else{if(!1===r)return e.setParams({additionalProperty:o}),e.error(),void(i||t.break());if("object"==typeof r&&!(0,util_1$8.alwaysValidSchema)(s,r)){const r=t.name("valid");"failing"===c.removeAdditional?(f(o,r,!1),t.if((0,codegen_1$5.not)(r),()=>{e.reset(),u(o)})):(f(o,r),i||t.if((0,codegen_1$5.not)(r),()=>t.break()))}}}function f(t,r,o){const a={keyword:"additionalProperties",dataProp:t,dataPropType:util_1$8.Type.Str};!1===o&&Object.assign(a,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(a,r)}t.forIn("key",a,r=>{l.length||d.length?t.if(function(r){let a;if(l.length>8){const e=(0,util_1$8.schemaRefOrVal)(s,o.properties,"properties");a=(0,code_1$3.isOwnProperty)(t,e,r)}else a=l.length?(0,codegen_1$5.or)(...l.map(e=>codegen_1$5._`${r} === ${e}`)):codegen_1$5.nil;return d.length&&(a=(0,codegen_1$5.or)(a,...d.map(t=>codegen_1$5._`${(0,code_1$3.usePattern)(e,t)}.test(${r})`))),(0,codegen_1$5.not)(a)}(r),()=>p(r)):p(r)}),e.ok(codegen_1$5._`${n} === ${names_1.default.errors}`)}};additionalProperties.default=def$a;var properties$1={};Object.defineProperty(properties$1,"__esModule",{value:!0});const validate_1=validate$1,code_1$2=code,util_1$7=util,additionalProperties_1$1=additionalProperties,def$9={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:o,data:a,it:n}=e;"all"===n.opts.removeAdditional&&void 0===o.additionalProperties&&additionalProperties_1$1.default.code(new validate_1.KeywordCxt(n,additionalProperties_1$1.default,"additionalProperties"));const s=(0,code_1$2.allSchemaProperties)(r);for(const e of s)n.definedProperties.add(e);n.opts.unevaluated&&s.length&&!0!==n.props&&(n.props=util_1$7.mergeEvaluated.props(t,(0,util_1$7.toHash)(s),n.props));const i=s.filter(e=>!(0,util_1$7.alwaysValidSchema)(n,r[e]));if(0===i.length)return;const c=t.name("valid");for(const r of i)l(r)?d(r):(t.if((0,code_1$2.propertyInData)(t,a,r,n.opts.ownProperties)),d(r),n.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(r),e.ok(c);function l(e){return n.opts.useDefaults&&!n.compositeRule&&void 0!==r[e].default}function d(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},c)}}};properties$1.default=def$9;var patternProperties={};Object.defineProperty(patternProperties,"__esModule",{value:!0});const code_1$1=code,codegen_1$4=codegen,util_1$6=util,util_2=util,def$8={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:o,parentSchema:a,it:n}=e,{opts:s}=n,i=(0,code_1$1.allSchemaProperties)(r),c=i.filter(e=>(0,util_1$6.alwaysValidSchema)(n,r[e]));if(0===i.length||c.length===i.length&&(!n.opts.unevaluated||!0===n.props))return;const l=s.strictSchema&&!s.allowMatchingProperties&&a.properties,d=t.name("valid");!0===n.props||n.props instanceof codegen_1$4.Name||(n.props=(0,util_2.evaluatedPropsToName)(t,n.props));const{props:u}=n;function p(e){for(const t in l)new RegExp(e).test(t)&&(0,util_1$6.checkStrictMode)(n,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function f(r){t.forIn("key",o,o=>{t.if(codegen_1$4._`${(0,code_1$1.usePattern)(e,r)}.test(${o})`,()=>{const a=c.includes(r);a||e.subschema({keyword:"patternProperties",schemaProp:r,dataProp:o,dataPropType:util_2.Type.Str},d),n.opts.unevaluated&&!0!==u?t.assign(codegen_1$4._`${u}[${o}]`,!0):a||n.allErrors||t.if((0,codegen_1$4.not)(d),()=>t.break())})})}!function(){for(const e of i)l&&p(e),n.allErrors?f(e):(t.var(d,!0),f(e),t.if(d))}()}};patternProperties.default=def$8;var not={};Object.defineProperty(not,"__esModule",{value:!0});const util_1$5=util,def$7={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:o}=e;if((0,util_1$5.alwaysValidSchema)(o,r))return void e.fail();const a=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},a),e.failResult(a,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};not.default=def$7;var anyOf={};Object.defineProperty(anyOf,"__esModule",{value:!0});const code_1=code,def$6={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:code_1.validateUnion,error:{message:"must match a schema in anyOf"}};anyOf.default=def$6;var oneOf={};Object.defineProperty(oneOf,"__esModule",{value:!0});const codegen_1$3=codegen,util_1$4=util,error$3={message:"must match exactly one schema in oneOf",params:({params:e})=>codegen_1$3._`{passingSchemas: ${e.passing}}`},def$5={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:error$3,code(e){const{gen:t,schema:r,parentSchema:o,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(a.opts.discriminator&&o.discriminator)return;const n=r,s=t.let("valid",!1),i=t.let("passing",null),c=t.name("_valid");e.setParams({passing:i}),t.block((function(){n.forEach((r,o)=>{let n;(0,util_1$4.alwaysValidSchema)(a,r)?t.var(c,!0):n=e.subschema({keyword:"oneOf",schemaProp:o,compositeRule:!0},c),o>0&&t.if(codegen_1$3._`${c} && ${s}`).assign(s,!1).assign(i,codegen_1$3._`[${i}, ${o}]`).else(),t.if(c,()=>{t.assign(s,!0),t.assign(i,o),n&&e.mergeEvaluated(n,codegen_1$3.Name)})})})),e.result(s,()=>e.reset(),()=>e.error(!0))}};oneOf.default=def$5;var allOf={};Object.defineProperty(allOf,"__esModule",{value:!0});const util_1$3=util,def$4={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:o}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const a=t.name("valid");r.forEach((t,r)=>{if((0,util_1$3.alwaysValidSchema)(o,t))return;const n=e.subschema({keyword:"allOf",schemaProp:r},a);e.ok(a),e.mergeEvaluated(n)})}};allOf.default=def$4;var _if={};Object.defineProperty(_if,"__esModule",{value:!0});const codegen_1$2=codegen,util_1$2=util,error$2={message:({params:e})=>codegen_1$2.str`must match "${e.ifClause}" schema`,params:({params:e})=>codegen_1$2._`{failingKeyword: ${e.ifClause}}`},def$3={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:error$2,code(e){const{gen:t,parentSchema:r,it:o}=e;void 0===r.then&&void 0===r.else&&(0,util_1$2.checkStrictMode)(o,'"if" without "then" and "else" is ignored');const a=hasSchema(o,"then"),n=hasSchema(o,"else");if(!a&&!n)return;const s=t.let("valid",!0),i=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},i);e.mergeEvaluated(t)}(),e.reset(),a&&n){const r=t.let("ifClause");e.setParams({ifClause:r}),t.if(i,c("then",r),c("else",r))}else a?t.if(i,c("then")):t.if((0,codegen_1$2.not)(i),c("else"));function c(r,o){return()=>{const a=e.subschema({keyword:r},i);t.assign(s,i),e.mergeValidEvaluated(a,s),o?t.assign(o,codegen_1$2._`${r}`):e.setParams({ifClause:r})}}e.pass(s,()=>e.error(!0))}};function hasSchema(e,t){const r=e.schema[t];return void 0!==r&&!(0,util_1$2.alwaysValidSchema)(e,r)}_if.default=def$3;var thenElse={};Object.defineProperty(thenElse,"__esModule",{value:!0});const util_1$1=util,def$2={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){void 0===t.if&&(0,util_1$1.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};thenElse.default=def$2,Object.defineProperty(applicator,"__esModule",{value:!0});const additionalItems_1=additionalItems,prefixItems_1=prefixItems,items_1=items,items2020_1=items2020,contains_1=contains,dependencies_1=dependencies,propertyNames_1=propertyNames,additionalProperties_1=additionalProperties,properties_1=properties$1,patternProperties_1=patternProperties,not_1=not,anyOf_1=anyOf,oneOf_1=oneOf,allOf_1=allOf,if_1=_if,thenElse_1=thenElse;function getApplicator(e=!1){const t=[not_1.default,anyOf_1.default,oneOf_1.default,allOf_1.default,if_1.default,thenElse_1.default,propertyNames_1.default,additionalProperties_1.default,dependencies_1.default,properties_1.default,patternProperties_1.default];return e?t.push(prefixItems_1.default,items2020_1.default):t.push(additionalItems_1.default,items_1.default),t.push(contains_1.default),t}applicator.default=getApplicator;var format$2={},format$1={};Object.defineProperty(format$1,"__esModule",{value:!0});const codegen_1$1=codegen,error$1={message:({schemaCode:e})=>codegen_1$1.str`must match format "${e}"`,params:({schemaCode:e})=>codegen_1$1._`{format: ${e}}`},def$1={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:error$1,code(e,t){const{gen:r,data:o,$data:a,schema:n,schemaCode:s,it:i}=e,{opts:c,errSchemaPath:l,schemaEnv:d,self:u}=i;c.validateFormats&&(a?function(){const a=r.scopeValue("formats",{ref:u.formats,code:c.code.formats}),n=r.const("fDef",codegen_1$1._`${a}[${s}]`),i=r.let("fType"),l=r.let("format");r.if(codegen_1$1._`typeof ${n} == "object" && !(${n} instanceof RegExp)`,()=>r.assign(i,codegen_1$1._`${n}.type || "string"`).assign(l,codegen_1$1._`${n}.validate`),()=>r.assign(i,codegen_1$1._`"string"`).assign(l,n)),e.fail$data((0,codegen_1$1.or)(!1===c.strictSchema?codegen_1$1.nil:codegen_1$1._`${s} && !${l}`,function(){const e=d.$async?codegen_1$1._`(${n}.async ? await ${l}(${o}) : ${l}(${o}))`:codegen_1$1._`${l}(${o})`,r=codegen_1$1._`(typeof ${l} == "function" ? ${e} : ${l}.test(${o}))`;return codegen_1$1._`${l} && ${l} !== true && ${i} === ${t} && !${r}`}()))}():function(){const a=u.formats[n];if(!a)return void function(){if(!1!==c.strictSchema)throw new Error(e());function e(){return`unknown format "${n}" ignored in schema at path "${l}"`}u.logger.warn(e())}();if(!0===a)return;const[s,i,p]=function(e){const t=e instanceof RegExp?(0,codegen_1$1.regexpCode)(e):c.code.formats?codegen_1$1._`${c.code.formats}${(0,codegen_1$1.getProperty)(n)}`:void 0,o=r.scopeValue("formats",{key:n,ref:e,code:t});return"object"!=typeof e||e instanceof RegExp?["string",e,o]:[e.type||"string",e.validate,codegen_1$1._`${o}.validate`]}(a);s===t&&e.pass(function(){if("object"==typeof a&&!(a instanceof RegExp)&&a.async){if(!d.$async)throw new Error("async format in sync schema");return codegen_1$1._`await ${p}(${o})`}return"function"==typeof i?codegen_1$1._`${p}(${o})`:codegen_1$1._`${p}.test(${o})`}())}())}};format$1.default=def$1,Object.defineProperty(format$2,"__esModule",{value:!0});const format_1$1=format$1,format=[format_1$1.default];format$2.default=format;var metadata={};Object.defineProperty(metadata,"__esModule",{value:!0}),metadata.contentVocabulary=metadata.metadataVocabulary=void 0,metadata.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],metadata.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"],Object.defineProperty(draft7,"__esModule",{value:!0});const core_1=core$1,validation_1=validation$1,applicator_1=applicator,format_1=format$2,metadata_1=metadata,draft7Vocabularies=[core_1.default,validation_1.default,(0,applicator_1.default)(),format_1.default,metadata_1.metadataVocabulary,metadata_1.contentVocabulary];draft7.default=draft7Vocabularies;var discriminator={},types={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0,(t=e.DiscrError||(e.DiscrError={})).Tag="tag",t.Mapping="mapping"}(types),Object.defineProperty(discriminator,"__esModule",{value:!0});const codegen_1=codegen,types_1=types,compile_1=compile,util_1=util,error={message:({params:{discrError:e,tagName:t}})=>e===types_1.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>codegen_1._`{error: ${e}, tag: ${r}, tagValue: ${t}}`},def={keyword:"discriminator",type:"object",schemaType:"object",error:error,code(e){const{gen:t,data:r,schema:o,parentSchema:a,it:n}=e,{oneOf:s}=a;if(!n.opts.discriminator)throw new Error("discriminator: requires discriminator option");const i=o.propertyName;if("string"!=typeof i)throw new Error("discriminator: requires propertyName");if(o.mapping)throw new Error("discriminator: mapping is not supported");if(!s)throw new Error("discriminator: requires oneOf keyword");const c=t.let("valid",!1),l=t.const("tag",codegen_1._`${r}${(0,codegen_1.getProperty)(i)}`);function d(r){const o=t.name("valid"),a=e.subschema({keyword:"oneOf",schemaProp:r},o);return e.mergeEvaluated(a,codegen_1.Name),o}t.if(codegen_1._`typeof ${l} == "string"`,()=>function(){const r=function(){var e;const t={},r=c(a);let o=!0;for(let t=0;t<s.length;t++){let a=s[t];(null==a?void 0:a.$ref)&&!(0,util_1.schemaHasRulesButRef)(a,n.self.RULES)&&(a=compile_1.resolveRef.call(n.self,n.schemaEnv.root,n.baseId,null==a?void 0:a.$ref),a instanceof compile_1.SchemaEnv&&(a=a.schema));const d=null===(e=null==a?void 0:a.properties)||void 0===e?void 0:e[i];if("object"!=typeof d)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${i}"`);o=o&&(r||c(a)),l(d,t)}if(!o)throw new Error(`discriminator: "${i}" must be required`);return t;function c({required:e}){return Array.isArray(e)&&e.includes(i)}function l(e,t){if(e.const)d(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${i}" must have "const" or "enum"`);for(const r of e.enum)d(r,t)}}function d(e,r){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${i}" values must be unique strings`);t[e]=r}}();t.if(!1);for(const e in r)t.elseIf(codegen_1._`${l} === ${e}`),t.assign(c,d(r[e]));t.else(),e.error(!1,{discrError:types_1.DiscrError.Mapping,tag:l,tagName:i}),t.endIf()}(),()=>e.error(!1,{discrError:types_1.DiscrError.Tag,tag:l,tagName:i})),e.ok(c)}};discriminator.default=def;var $schema="http://json-schema.org/draft-07/schema#",$id="http://json-schema.org/draft-07/schema#",title="Core schema meta-schema",definitions={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type=["object","boolean"],properties={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},require$$3={$schema:$schema,$id:$id,title:title,definitions:definitions,type:type,properties:properties,default:!0};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const r=core$2,o=draft7,a=discriminator,n=require$$3,s=["/properties"],i="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),o.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(a.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(n,s):n;this.addMetaSchema(e,i,!1),this.refs["http://json-schema.org/schema"]=i}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(i)?i:void 0)}}e.exports=t=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var l=validate$1;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var d=codegen;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}})}(ajv$1,ajv$1.exports);var Ajv=getDefaultExportFromCjs(ajv$1.exports),ajv=new Ajv({strict:!1}),VALIDATOR="validator",OWN_RULE_PROPERTY="ui:rules",DEBUG_PREFIX="[bk-schema-form-validator]",throwErr=function(e){throw new Error("".concat(DEBUG_PREFIX," ").concat(e))},globalRules=new Map,registryGlobalRules=function(e){try{if(!e)return;(null==e?void 0:e.constructor)!==Object&&throwErr("global rules must be an object"),Object.keys(e).forEach((function(t){var r=e[t];hasOwnProperty(r,VALIDATOR)||throwErr("'".concat(t,"' rule must have a validator property"));var o=r[VALIDATOR];isExpression(o)||isRegExp(o)||(null==o?void 0:o.constructor)===Function||throwErr("'".concat(t,"' must be one of expression or regexp or function")),globalRules.set(t,r)}))}catch(e){throwErr(e)}},validate=function validate(rule,instance){var theRule=rule;"string"==typeof rule&&(theRule=globalRules.get(rule),theRule||throwErr("'".concat(rule," is not a valid global rule, you can registry it to global rules node or use form item own custom rules")));var _theRule=theRule,validator=_theRule.validator,message=_theRule.message,valid=!0;return isExpression(validator)?valid=executeExpression(validator,instance):"function"==typeof validator?valid=validator(instance):eval(validator)instanceof RegExp&&(valid=new RegExp(eval(validator)).test(instance.value)),{valid:valid,message:message}},validateFormItem=function(e){var t,r=widgetTree.widgetMap[e];if(!r)return!0;var o,a=r.instance,n=a.schema,s=ajv.compile(n);if(!s(void 0===a.value?initializationValue(n.type,{integer:0,number:0}):a.value))return null==a||a.setState("error",!0),null==a||a.setErrorTips(null===(o=s.errors)||void 0===o?void 0:o.map((function(e){return e.message}))),!1;var i=null===(t=a.schema)||void 0===t?void 0:t[OWN_RULE_PROPERTY];if(!i)return!0;var c,l=!1,d="",u=_createForOfIteratorHelper(i);try{for(u.s();!(c=u.n()).done;){var p=c.value,f=validate(p,a);if(!f.valid){l=!0,d=f.message;break}}}catch(e){u.e(e)}finally{u.f()}null==a||a.setState("error",l),null==a||a.setErrorTips(d);var h=e.split("."),m=[];return h.forEach((function(t,r){var o=h.slice(0,h.length-r),a=o.join("."),n=widgetTree.widgetMap[a];if(m.push(n.instance.schema.title||o.pop()),n.instance.verifiable&&"group"===n.type)if(l){var s="".concat(m.reverse().join("-"),": ").concat(d);n.instance.setGroupErrorTips(e,s)}else n.instance.removeGroupErrorTips(e)})),!l},validateForm=function(){var e=!0;return Object.keys(widgetTree.widgetMap).forEach((function(t){validateFormItem(t)||(e=!1)})),e},dispatchValidate=function(e){return validateFormItem(e)},FormEvent=function(){function e(){_classCallCheck(this,e),this.callbacks=void 0,this.callbacks=Object.create(null)}return _createClass(e,[{key:"on",value:function(e,t,r){return e in this.callbacks||(this.callbacks[e]={}),t in this.callbacks[e]||(this.callbacks[e][t]=[]),this.callbacks[e][t].push(r),this}},{key:"off",value:function(e,t,r){if(e&&t)if(e&&!t)delete this.callbacks[e];else if(e&&t&&!r)delete this.callbacks[e][t];else{var o=this.callbacks[e][t];for(var a in o)r===o[a]&&o.splice(Number(a),1)}else this.callbacks=Object.create(null);return this}},{key:"once",value:function(e,t,r){var o=this;function a(){r.apply(void 0,arguments),o.off(e,t,a)}return a.fn=r,this.on(e,t,a),this}},{key:"emit",value:function(e,t){if(this.callbacks[e]&&t in this.callbacks[e]){for(var r=_toConsumableArray(this.callbacks[e][t]),o=arguments.length,a=new Array(o>2?o-2:0),n=2;n<o;n++)a[n-2]=arguments[n];var s,i=_createForOfIteratorHelper(r);try{for(i.s();!(s=i.n()).done;){var c=s.value;c.apply(void 0,a)}}catch(e){i.e(e)}finally{i.f()}}}}]),e}(),events=new FormEvent,_excluded$2=["url","params"],_excluded2=["name"],Widget=Vue__default.default.extend({name:"Widget",props:props,data:function(){return{loading:!1,datasource:Schema.resolveDefaultDatasource(this.schema),formItemProps:{},state:Object.assign({visible:!0,disabled:!1,readonly:!1,error:!1},this.defaultState),errorTips:""}},computed:{widgetNode:function(){return widgetTree.widgetMap[this.path]}},watch:{value:{handler:function(e,t){var r=this;deepEquals(e,t)||setTimeout((function(){reactionDispatch(r.path,"valChange"),dispatchValidate(r.path)}),0)}}},created:function(){var e=this,t=Schema.getUiOptions(this.schema);this.formItemProps=_objectSpread2(_objectSpread2({},t),{},{label:t.showTitle?t.label||Path.getPathLastProp(this.path):"",required:this.required});var r=Schema.getUiComponent(this.schema),o=Object.assign({},this.formItemProps,r.props||{});Object.keys(o).forEach((function(t){Reflect.has(e.state,t)&&e.setState(t,o[t])})),widgetTree.addWidgetNode(this.path,this,"node")},mounted:function(){reactionRegister(this.path,this.schema["ui:reactions"]),reactionDispatch(this.path,"valChange"),reactionDispatch(this.path,"lifetime/init")},beforeDestroy:function(){widgetTree.removeWidgetNode(this.path,this),reactionUnRegister(this.path)},methods:{setState:function(e,t){Reflect.has(this.state,e)?this.state[e]=t:"value"===e?this.$emit("input",{path:this.path,value:t}):console.warn("Unsupported ".concat(e," state, please check"))},loadDataSource:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark((function t(){var r,o,a,n,s,i,c,l,d,u,p,f,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=null===(r=e.schema)||void 0===r||null===(o=r["ui:component"])||void 0===o||null===(a=o.props)||void 0===a?void 0:a.remoteConfig)){t.next=18;break}return s=n.url,i=n.params,c=_objectWithoutProperties(n,_excluded$2),l=e.httpAdapter,d=l.request,u=void 0===d?request:d,p=l.responseParse,t.prev=4,e.loading=!0,f=executeExpression(s,e),h=isObj(i)?executeExpression(i,e):i,t.next=10,u(f,_objectSpread2(_objectSpread2({},c),{},{params:h,responseParse:p}));case 10:e.datasource=t.sent,e.loading=!1,t.next=18;break;case 14:t.prev=14,t.t0=t.catch(4),e.loading=!1,console.error(t.t0);case 18:case"end":return t.stop()}}),t,null,[[4,14]])})))()},setErrorTips:function(e){this.errorTips=e},getValue:function(e){return Path.getPathVal(this.rootData,e)}},render:function(e){var t,r,o,a,n,s,i=Schema.getUiComponent(this.schema),c=i.name,l=_objectWithoutProperties(i,_excluded2),d=_objectSpread2(_objectSpread2({},this.$props),{},{loading:this.loading,value:this.value}),u=this,p=registry.getComponent(c)||c||Schema.getDefaultWidget(this.schema),f=(null===(t=events.callbacks)||void 0===t?void 0:t[this.path])||{},h=null!==(r=null===(o=(a=this.$scopedSlots).default)||void 0===o?void 0:o.call(a,{path:this.path}))&&void 0!==r?r:e(p,mergeDeep({props:_objectSpread2({},d),attrs:_objectSpread2({},l.props||{}),on:_objectSpread2(_objectSpread2({},f),{},{input:[].concat(_toConsumableArray(f.input||[]),[function(e){u.$emit("input",{path:u.path,value:e})}]),click:function(){reactionDispatch(u.path,"effect/click")}})},mergeDeep(l,{props:_objectSpread2(_objectSpread2({},this.state),{},{datasource:this.datasource}),attrs:_objectSpread2({},this.state)})));return e(registry.getBaseWidget("form-item"),{props:this.formItemProps,style:_objectSpread2(_objectSpread2(_objectSpread2({},this.layout.item||{}),this.layout.container||{}),{},{display:this.state.visible?"":"none"}),class:{"bk-schema-form-item--error":this.state.error}},[h,null===(n=(s=this.$scopedSlots).suffix)||void 0===n?void 0:n.call(s,{path:this.path,schema:this.schema}),this.removeable&&e("span",{class:["bk-schema-form-group-delete"],style:{right:"-20px",top:"0px"},on:{click:function(){u.$emit("remove",u.path)}}},[e("i",{class:["bk-icon icon-close3-shape"]})]),this.state.error?e("p",{class:"bk-schema-form-item__error-tips"},this.errorTips):null,this.formItemProps.tips?e("p",{slot:"tip",class:["mt5","mb0","f12"],style:{color:"#5e6d82",lineHeight:"1.5em"}},this.formItemProps.tips):null])}}),StringField=Vue__default.default.extend({name:"StringField",functional:!0,props:props,render:function(e,t){return e(Widget,_objectSpread2({},t.data))}}),NumberField=Vue__default.default.extend({name:"NumberField",functional:!0,props:props,render:function(e,t){var r;return e(StringField,_objectSpread2(_objectSpread2({},t.data),{},{props:_objectSpread2(_objectSpread2({},t.props),{},{schema:mergeDeep({"ui:component":{props:{type:"number",min:"integer"===(null===(r=t.props.schema)||void 0===r?void 0:r.type)?0:-1/0}}},t.props.schema)}),on:_objectSpread2(_objectSpread2({},t.data.on||{}),{},{input:function(e){var r,o,a,n;"function"==typeof(null===(r=t.data)||void 0===r||null===(o=r.on)||void 0===o?void 0:o.input)&&(null===(a=t.data)||void 0===a||null===(n=a.on)||void 0===n||n.input(_objectSpread2(_objectSpread2({},e),{},{value:Number(e.value)||0})))}})}))}}),_excluded$1=["name"],ArrayWidget=Vue__default.default.extend({name:"ArrayWidget",props:props,mounted:function(){this.handleFillItem()},methods:{handleFillItem:function(){var e=this.schema.minItems,t=void 0===e?0:e;if(this.value.length<t){var r=Schema.getSchemaDefaultValue(this.schema.items),o=new Array(t-this.value.length).fill(r);this.$emit("input",{path:this.path,value:[].concat(_toConsumableArray(this.value),_toConsumableArray(o))})}},handleAddItem:function(){var e=Schema.getSchemaDefaultValue(this.schema.items),t=JSON.parse(JSON.stringify(this.value||[]));t.push(e),this.$emit("input",{path:this.path,value:t})},handleDeleteItem:function(e){var t=Number(Path.getPathLastProp(e)),r=JSON.parse(JSON.stringify(this.value||[]));r.splice(t,1),this.$emit("input",{path:this.path,value:r})}},render:function(e){var t=this,r=this,o=(Array.isArray(this.value)?this.value:[]).map((function(o,a){var n=Path.getCurPath(t.path,a);return e(SchemaField,{key:n,props:_objectSpread2(_objectSpread2({},t.$props),{},{schema:t.schema.items,path:n,layout:_objectSpread2(_objectSpread2({},t.layout),{},{item:{}}),removeable:!0}),on:_objectSpread2(_objectSpread2({},t.$listeners),{},{remove:function(e){r.handleDeleteItem(e)}})})})),a=Schema.getGroupWrap(this.schema),n=a.name,s=_objectWithoutProperties(a,_excluded$1);return e(n,mergeDeep({props:_objectSpread2(_objectSpread2({},this.$props),{},{layout:{},showTitle:!0}),style:_objectSpread2({},this.layout.item||{})},s),[].concat(_toConsumableArray(o),[e("span",{class:["bk-schema-form-group-add"],on:{click:function(){r.handleAddItem()}}},[e("i",{class:["bk-icon icon-plus-circle-shape mr5"]}),"添加"])]))}}),_excluded=["name"],ArrayField=Vue__default.default.extend({name:"ArrayField",functional:!0,props:props,render:function(e,t){var r=t.props,o=r.schema,a=r.path;if(Schema.isMultiSelect(o)||Schema.isCustomArrayWidget(o))return e(Widget,_objectSpread2(_objectSpread2({},t.data),{},{key:a,props:_objectSpread2(_objectSpread2({},t.props),{},{schema:mergeDeep({"ui:component":{props:{multiple:!0}}},t.props.schema)})}));if(Schema.isTupleArray(o)){var n=Schema.getGroupWrap(o),s=n.name,i=_objectWithoutProperties(n,_excluded),c=o.items.map((function(r,o){return e(SchemaField,_objectSpread2(_objectSpread2({},t.data),{},{key:Path.getCurPath(a,o),props:_objectSpread2(_objectSpread2({},t.props),{},{schema:r,path:Path.getCurPath(a,o)})}))}));return e(s,mergeDeep({props:_objectSpread2(_objectSpread2({},t.props),{},{path:a,showTitle:!0})},i),_toConsumableArray(c))}return e(ArrayWidget,_objectSpread2({},t.data))}}),BooleanField=Vue__default.default.extend({name:"BooleanField",functional:!0,props:props,render:function(e,t){var r=(t.props.schema["ui:component"]||{}).name,o={};if(["radio","select"].includes(r))o={datasource:[{label:"False",value:!1},{label:"True",value:!0}]};else if("checkbox"===r){var a;o={label:null===(a=t.props.schema)||void 0===a?void 0:a.title}}return e(Widget,_objectSpread2(_objectSpread2({},t.data),{},{props:_objectSpread2(_objectSpread2({},t.props),{},{schema:mergeDeep({"ui:component":{props:o}},t.props.schema)})}))}}),CheckboxWidget=Vue__default.default.extend({name:"CheckboxWidget",props:{datasource:{type:Array,default:function(){return[]}},value:{type:[Array,Boolean],default:function(){return[]}},label:{type:String,default:""}},methods:{handleChange:function(e){this.$emit("input",e)}},render:function(e){var t=this;return Array.isArray(this.value)?e(registry.getBaseWidget("checkbox-group"),{on:{change:this.handleChange},props:{value:this.value}},this.datasource.map((function(r){return e(registry.getBaseWidget("checkbox"),{key:r.value,class:["mr24"],props:_objectSpread2({value:r.value},t.$attrs)},r.label)}))):e(registry.getBaseWidget("checkbox"),{props:{value:this.value},on:{change:this.handleChange}},this.label)}}),SelectWidget=Vue__default.default.extend({name:"SelectWidget",props:{datasource:{type:Array,default:function(){return[]}},value:{type:[Array,String,Number,Boolean],default:""},loading:{type:Boolean,default:!1}},methods:{handleSelectChange:function(e){this.$emit("input",e)}},render:function(e){return e(registry.getBaseWidget("select"),{props:_objectSpread2({loading:this.loading,value:this.value},this.$attrs),on:{change:this.handleSelectChange}},this.datasource.map((function(t){return e(registry.getBaseWidget("option"),{key:t.value,props:{name:t.label,id:t.value}})})))}}),RadioWidget=Vue__default.default.extend({name:"RadioWidget",props:{datasource:{type:Array,default:function(){return[]}},value:{type:[String,Number,Boolean],default:""}},methods:{handleChange:function(e){this.$emit("input",e)}},render:function(e){return e(registry.getBaseWidget("radio-group"),{props:{value:this.value},on:{change:this.handleChange}},this.datasource.map((function(t){return e(registry.getBaseWidget("radio"),{key:t.value,class:["mr24"],props:{value:t.value,label:t.label}},t.label)})))}}),ButtonWidget=Vue__default.default.extend({name:"ButtonWidget",props:{word:{type:String,default:""}},methods:{handleClick:function(){this.$emit("click")}},render:function(e){var t=this;return e(registry.getBaseWidget("button"),{props:_objectSpread2({},this.$attrs),on:{click:function(){t.handleClick()}}},this.word)}}),TableWidget=Vue__default.default.extend({name:"TableWidget",render:function(e){return e(registry.getBaseWidget("table"),{props:_objectSpread2({},this.$attrs)})}}),FieldGroupWrap=Vue__default.default.extend({name:"FieldGroupWrap",props:_objectSpread2(_objectSpread2({},props),{},{type:{type:String,default:"default",validator:function(e){return["default","normal","card"].includes(e)}},showTitle:{type:Boolean,default:!1},border:{type:Boolean,default:!1},verifiable:{type:Boolean,default:!1}}),data:function(){return{groupErrorTips:{}}},created:function(){widgetTree.addWidgetNode(this.path,this,"group")},beforeDestroy:function(){widgetTree.removeWidgetNode(this.path,this)},methods:{setGroupErrorTips:function(e,t){this.$set(this.groupErrorTips,e,t)},removeGroupErrorTips:function(e){this.$delete(this.groupErrorTips,e)}},render:function(e){var t,r,o,a,n=this,s=_objectSpread2({position:"relative",border:this.border?"1px solid #dcdee5":"none"},(null===(t=this.layout)||void 0===t?void 0:t.item)||{}),i=_objectSpread2({},(null===(r=this.layout)||void 0===r?void 0:r.container)||{display:"grid",gridGap:"24px"}),c=this,l=(null===(o=this.schema)||void 0===o?void 0:o.title)||(null===(a=this.layout)||void 0===a?void 0:a.prop),d=Object.keys(this.groupErrorTips).map((function(t){return e("p",[n.groupErrorTips[t]])})),u="{}"!==JSON.stringify(this.groupErrorTips);return e("div",{class:["bk-schema-form-group",this.type,{"bk-schema-form-group--error":u}],style:s},[l&&this.showTitle?e("span",{class:["bk-schema-form-group-title",this.type]},[l,u?e("span",{class:"bk-schema-form-group__error-tips"},[e("span",{class:"bk-schema-form-group__error-tips-popover"},[d])]):null]):null,e("div",{style:i,class:"bk-schema-form-group-content"},[this.$slots.default]),this.removeable&&e("span",{class:["bk-schema-form-group-delete"],style:{right:"10px",top:"10px"},on:{click:function(){c.$emit("remove",c.path)}}},[e("i",{class:["bk-icon icon-close3-shape"]})])])}});function _extends(){return(_extends=Object.assign||function(e){for(var t,r=1;r<arguments.length;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}var normalMerge=["attrs","props","domProps"],toArrayMerge=["class","style","directives"],functionalMerge=["on","nativeOn"],mergeJsxProps=function(e){return e.reduce((function(e,t){for(var r in t)if(e[r])if(-1!==normalMerge.indexOf(r))e[r]=_extends({},e[r],t[r]);else if(-1!==toArrayMerge.indexOf(r)){var o=e[r]instanceof Array?e[r]:[e[r]],a=t[r]instanceof Array?t[r]:[t[r]];e[r]=o.concat(a)}else if(-1!==functionalMerge.indexOf(r))for(var n in t[r])if(e[r][n]){var s=e[r][n]instanceof Array?e[r][n]:[e[r][n]],i=t[r][n]instanceof Array?t[r][n]:[t[r][n]];e[r][n]=s.concat(i)}else e[r][n]=t[r][n];else if("hook"==r)for(var c in t[r])e[r][c]=e[r][c]?mergeFn(e[r][c],t[r][c]):t[r][c];else e[r]=t[r];else e[r]=t[r];return e}),{})},mergeFn=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}},helper=mergeJsxProps,NoTitleArray=Vue__default.default.extend({name:"NoTitleArray",props:_objectSpread2(_objectSpread2({},props),{},{disabled:{type:Boolean,default:!1}}),mounted:function(){var e,t=this.schema.minItems,r=void 0===t?0:t;if((null===(e=this.value)||void 0===e?void 0:e.length)<r){var o=Schema.getSchemaDefaultValue(this.schema.items),a=new Array(r-this.value.length).fill(o);this.$emit("input",[].concat(_toConsumableArray(this.value),_toConsumableArray(a)))}},methods:{handleAddItem:function(){if(!this.disabled){var e=Schema.getSchemaDefaultValue(this.schema.items);this.$emit("input",[].concat(_toConsumableArray(this.value),[e]))}},handleRemoveItem:function(e){if(!this.disabled){var t=JSON.parse(JSON.stringify(this.value));t.splice(e,1),this.$emit("input",t)}},handleInput:function(e){var t=e.path,r=e.value,o=Path.getSubPath(this.path,t),a=Path.setPathValue(this.value,o,r);this.$emit("input",a)}},render:function(e){var t,r,o,a,n,s=this,i={"font-size":"16px",color:"#979ba5",cursor:this.disabled?"not-allowed":"pointer"},c=null===(t=this.schema)||void 0===t||null===(r=t.items)||void 0===r?void 0:r.properties,l=orderProperties(Object.keys(c||{}),null===(o=this.schema)||void 0===o||null===(a=o.items)||void 0===a?void 0:a["ui:order"]),d=Object.keys(c||{}).length,u=c?new Array(d).fill("1fr").concat("24px").join(" "):"1fr 24px",p=_objectSpread2({},this.layout.container||{display:"grid",gridGap:"24px","grid-template-columns":u}),f=this,h=function(e){return mergeDeep({"ui:component":{props:{placeholder:e.title}},"ui:props":{showTitle:!1,labelWidth:.1}},e)},m=function(t){var r=t.path,o=t.schema,a=t.required,n=t.layout;return e(SchemaField,{key:r,props:_objectSpread2(_objectSpread2({},s.$props),{},{schema:o,required:a,path:r,layout:n,defaultState:{disabled:s.disabled}}),on:{input:function(e){f.handleInput(e)}}})};return e("div",[null===(n=this.value)||void 0===n?void 0:n.map((function(t,r){var o,a=Path.getCurPath(s.path,"".concat(r));return e(FieldGroupWrap,helper([{},{props:_objectSpread2(_objectSpread2({},s.$props),{},{path:a,layout:_objectSpread2(_objectSpread2({},s.layout),{},{container:_objectSpread2({},p)})})},{class:"mb10"}]),[null!=l&&l.length?l.map((function(e){var t,o,a=null===(t=s.schema)||void 0===t||null===(o=t.items)||void 0===o?void 0:o.properties[e],n=Path.getCurPath(s.path,"".concat(r,".").concat(e)),i=n.split(".").pop(),c=Layout.findLayoutByProp(i,s.layout.group||[])||{};return m({path:n,schema:h(a),layout:c,required:Schema.isRequired(a,e)})})):m({path:Path.getCurPath(s.path,r),schema:h((null===(o=s.schema)||void 0===o?void 0:o.items)||{}),layout:{},required:!1}),e("span",{style:i,on:{click:function(){return s.handleRemoveItem(r)}}},[e("i",{class:"bk-icon icon-minus-line"})])])})),e("span",{on:{click:this.handleAddItem},style:i},[e("i",{class:"bk-icon icon-plus-line"})])])}}),TabGroupWidget=Vue__default.default.extend({name:"TabWidget",props:_objectSpread2(_objectSpread2({},props),{},{type:{type:String,default:"default",validator:function(e){return["default","normal","card"].includes(e)}},showTitle:{type:Boolean,default:!1},border:{type:Boolean,default:!1},verifiable:{type:Boolean,default:!1}}),render:function(e){var t,r=this,o=_objectSpread2(_objectSpread2({},this.$props),{},{layout:_objectSpread2(_objectSpread2({},this.layout),{},{container:{}}),title:this.schema.title}),a=this,n=orderProperties(Object.keys((null===(t=this.schema)||void 0===t?void 0:t.properties)||{}),this.schema["ui:order"]);return e(FieldGroupWrap,{props:_objectSpread2({},o),on:{remove:function(e){a.$emit("remove",e)}}},[e(registry.getBaseWidget("tab"),{},n.map((function(t){var o,a,n=null===(o=r.schema)||void 0===o||null===(a=o.properties)||void 0===a?void 0:a[t],s=Path.getCurPath(r.path,t),i=s.split(".").pop(),c=Layout.findLayoutByProp(i,r.layout.group||[])||{};return e(registry.getBaseWidget("tab-panel"),{key:t,props:{name:t,label:null==n?void 0:n.title}},[e(SchemaField,{key:s,props:_objectSpread2(_objectSpread2({},r.$props),{},{schema:n,required:Schema.isRequired(n,t),path:s,layout:c,removeable:!1}),on:_objectSpread2({},r.$listeners)})])})))])}}),CollapseGroupWidget=Vue__default.default.extend({name:"CollapseWidget",props:_objectSpread2(_objectSpread2({},props),{},{type:{type:String,default:"default",validator:function(e){return["default","normal","card"].includes(e)}},showTitle:{type:Boolean,default:!1},border:{type:Boolean,default:!1},defaultActiveName:{type:Array,default:function(){return[]}},verifiable:{type:Boolean,default:!1}}),data:function(){return{activeName:this.defaultActiveName}},render:function(e){var t,r=this,o={background:"#f5f7fa","border-radius":"2px",padding:"0 14px",height:"100%",display:"flex","align-items":"center"},a={"font-size":"16px",display:"inline-block",transition:"all 0.5s ease"},n=_objectSpread2(_objectSpread2({},this.$props),{},{layout:_objectSpread2(_objectSpread2({},this.layout),{},{container:{}}),title:this.schema.title}),s=orderProperties(Object.keys((null===(t=this.schema)||void 0===t?void 0:t.properties)||{}),this.schema["ui:order"]).map((function(t){var n,s,i=null===(n=r.schema)||void 0===n||null===(s=n.properties)||void 0===s?void 0:s[t],c=Path.getCurPath(r.path,t),l=c.split(".").pop(),d=Layout.findLayoutByProp(l,r.layout.group||[])||{};return e(registry.getBaseWidget("collapse-item"),{key:t,props:{hideArrow:!0,name:t},class:["mb15"]},[e("div",{style:o},[e("i",{class:["bk-icon icon-down-shape mr5"],style:_objectSpread2(_objectSpread2({},a),{},{transform:r.activeName.includes(t)?"rotate(0deg)":"rotate(-90deg)"})}),i.title]),e("template",{slot:"content"},[e(SchemaField,{key:c,props:_objectSpread2(_objectSpread2({},r.$props),{},{schema:i,required:Schema.isRequired(i,t),path:c,layout:d,removeable:!1}),on:_objectSpread2({},r.$listeners)})])])})),i=this;return e(FieldGroupWrap,{props:_objectSpread2({},n)},[e(registry.getBaseWidget("collapse"),{style:{},props:{value:this.activeName},on:{input:function(e){i.activeName=e}}},s)])}}),SwitcherWidget=Vue__default.default.extend({name:"SwitchWidget",props:{value:Boolean},methods:{handleChange:function(e){this.$emit("input",e)}},render:function(e){return e(registry.getBaseWidget("switcher"),{props:_objectSpread2({value:this.value},this.$attrs),on:{change:this.handleChange}})}}),ColorWidget=Vue__default.default.extend({name:"ColorPicker",props:{value:String},methods:{handleChange:function(e){this.$emit("input",e)}},render:function(e){return e(registry.getBaseWidget("color-picker"),{props:_objectSpread2({value:this.value},this.$attrs),on:{change:this.handleChange}})}}),UnitInputWidget=Vue__default.default.extend({name:"UnitInput",props:{value:[String,Number],unit:{type:String,default:""}},methods:{handleInput:function(e){this.$emit("input",e)}},render:function(e){return e(registry.getBaseWidget("input"),{props:_objectSpread2({value:this.value},this.$attrs),on:{input:this.handleInput}},[this.unit&&e("div",{slot:"append",class:["group-text"]},this.unit)])}});function styleInject(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===r&&o.firstChild?o.insertBefore(a,o.firstChild):o.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}var css_248z="";styleInject(css_248z);var defaultOptions={namespace:"bk",components:{button:ButtonWidget,select:SelectWidget,radio:RadioWidget,checkbox:CheckboxWidget,table:TableWidget,group:FieldGroupWrap,noTitleArray:NoTitleArray,tab:TabGroupWidget,collapse:CollapseGroupWidget,switcher:SwitcherWidget,color:ColorWidget,unitInput:UnitInputWidget},fields:{object:ObjectField,string:StringField,any:"",array:ArrayField,boolean:BooleanField,null:"",integer:NumberField,number:NumberField}};function createForm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=mergeDeep(defaultOptions,e),r=t.namespace,o=t.components,a=t.fields,n=t.baseWidgets,s=void 0===n?{}:n;return Registry.namespace=r,registry.addComponentsMap(o),registry.addFieldsMap(a),registry.addBaseWidgets(s),Vue__default.default.extend({name:"BkuiForm",props:props$1,data:function(){return{rootData:{}}},watch:{schema:function(){this.initFormData()},context:{handler:function(e){Registry.context=e,hasOwnProperty(e,"rules")&&registryGlobalRules(e.rules)},immediate:!0},rules:{immediate:!0,handler:function(e){registryGlobalRules(e)}},value:function(){this.initFormData()}},created:function(){this.initFormData()},methods:{initFormData:function(){this.rootData=merge(Schema.getSchemaDefaultValue(createProxy(this.schema,this))||{},this.value),this.emitFormValueChange(this.rootData,this.value)},emitFormValueChange:function(e,t){deepEquals(e,t)||(this.rootData=e,this.$emit("input",e),this.$emit("change",e,t))},validateForm:validateForm,validateFormItem:validateFormItem},render:function(e){var t=this;return e(registry.getBaseWidget("form"),{ref:"bkui-form",props:{model:this.value,formType:this.formType},class:{"bk-schema-form":!0},style:{width:"number"==typeof this.width?"".concat(this.width,"px"):this.width}},[e(SchemaField,{props:_objectSpread2(_objectSpread2({},this.$props),{},{schema:createProxy(this.schema,this),rootData:this.rootData,value:this.value,layout:new Layout(this.layout).layout}),scopedSlots:_objectSpread2({},this.$scopedSlots),on:{input:function(e){var r=e.path,o=void 0===r?"":r,a=e.value;if(o){var n=Path.setPathValue(t.rootData,o,a);t.emitFormValueChange(n,t.value)}else console.warn("widget path is empty")}}})])}})}Vue__default.default.config.devtools=!1,exports.Schema=Schema,exports.default=createForm,exports.events=events,Object.defineProperty(exports,"__esModule",{value:!0})},factory(exports,__webpack_require__("oCYn"))}).call(this,__webpack_require__("yLpj"))},"z/5e":function(e,t,r){e.exports={default:r("Nxk6"),__esModule:!0}}}]);